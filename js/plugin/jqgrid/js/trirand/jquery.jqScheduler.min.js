/*

 FullCalendar v1.5.1
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sat Apr 9 14:09:51 2011 -0700

*/
(function(a,b){function d(b){a.extend(!0,ka,b)}function c(c,d,E){function ia(){c.addClass("fc");d.isRTL&&c.addClass("fc-rtl");d.theme&&c.addClass("ui-widget");J=a("<div class='fc-content' style='position:relative'/>").prependTo(c);P=new e(z,d);(V=P.render())&&c.prepend(V);oa(d.defaultView);a(window).resize(u);0===a("body")[0].offsetWidth&&m();var b=a(".fc-view-"+d.defaultView,c).height();setTimeout(function(){a(".fc-view-search",c).css("height",b).hide()},200)}function m(){setTimeout(function(){y.start||
0===a("body")[0].offsetWidth||ca()},0)}function oa(b){if(!y||b!=y.name){K++;w();var d=y,c;d?((d.beforeHide||cb)(),Ka(J,J.height()),d.element.hide()):Ka(J,1);J.css("overflow","hidden");(y=ga[b])?y.element.show():y=ga[b]=new la[b](c=X=a("<div class='fc-view fc-view-"+b+"' style='position:absolute'/>").appendTo(J),z);a("#b_search_cal").hasClass("ui-state-active")&&a("#b_search_cal").trigger("click");d&&P.deactivateButton(d.name);P.activateButton(b);ca();J.css("overflow","");d&&Ka(J,1);c||(y.afterShow||
cb)();K--}}function ca(a){if(0!==F.offsetWidth){K++;w();ja===b&&l();var e=!1;!y.start||a||M<y.start||M>=y.end?(y.render(M,a||0),p(!0),e=!0):y.sizeDirty?(y.clearEvents(),p(),e=!0):y.eventsDirty&&(y.clearEvents(),e=!0);y.sizeDirty=!1;y.eventsDirty=!1;a=e;!d.lazyFetching||t(y.visStart,y.visEnd)?r():a&&n();pa=c.outerWidth();P.updateTitle(y.title);a=new Date;a>=y.start&&a<y.end?P.disableButton("today"):P.enableButton("today");K--;y.trigger("viewDisplay",F)}}function ma(){da();0!==F.offsetWidth&&(l(),p(),
w(),y.clearEvents(),y.renderEvents(N),y.sizeDirty=!1)}function da(){a.each(ga,function(a,b){b.sizeDirty=!0})}function l(){ja=d.contentHeight?d.contentHeight:d.height?d.height-(V?V.height():0)-Ca(J):Math.round(J.width()/Math.max(d.aspectRatio,0.5))}function p(a){K++;y.setHeight(ja,a);X&&(X.css("position","relative"),X=null);y.setWidth(J.width(),a);K--}function u(){if(!K)if(y.start){var a=++L;setTimeout(function(){a!=L||K||0===F.offsetWidth||pa==(pa=c.outerWidth())||(K++,ma(),y.trigger("windowResize",
F),K--)},200)}else m()}function r(){x(y.visStart,y.visEnd)}function n(a){s();0!==F.offsetWidth&&(y.clearEvents(),y.renderEvents(N,a),y.eventsDirty=!1)}function s(){a.each(ga,function(a,b){b.eventsDirty=!0})}function w(){y&&y.unselect()}var z=this;z.options=d;z.render=function(a){J?(l(),da(),s(),ca(a)):ia()};z.destroy=function(){a(window).unbind("resize",u);P.destroy();J.remove();c.removeClass("fc fc-rtl ui-widget")};z.refetchEvents=r;z.reportEvents=function(a){N=a;n()};z.reportEventChange=function(a){n(a)};
z.rerenderEvents=n;z.changeView=oa;z.select=function(a,d,c){y.select(a,d,c===b?!0:c)};z.unselect=w;z.prev=function(){ca(-1)};z.next=function(){ca(1)};z.prevYear=function(){g(M,-1);ca()};z.nextYear=function(){g(M,1);ca()};z.today=function(){M=new Date;ca()};z.gotoDate=function(a,b,d){a instanceof Date?M=q(a):D(M,a,b,d);ca()};z.incrementDate=function(a,d,c){a!==b&&g(M,a);d!==b&&k(M,d);c!==b&&h(M,c);ca()};z.formatDate=function(a,b){return H(a,b,d)};z.formatDates=function(a,b,c){return T(a,b,c,d)};z.getDate=
function(){return q(M)};z.getView=function(){return y};z.option=function(a,c){if(c===b)return d[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)d[a]=c,ma()};z.trigger=function(a,b){if(d[a])return d[a].apply(b||F,Array.prototype.slice.call(arguments,2))};f.call(z,d,E);var t=z.isFetchNeeded,x=z.fetchEvents,F=c[0],P,V,J,y,ga={},pa,ja,X,L=0,K=0,M=new Date,N=[],I;D(M,d.year,d.month,d.date);d.droppable&&a(document).bind("dragstart",function(b,c){var e=b.target,O=a(e);if(!O.parents(".fc").length){var f=
d.dropAccept;if(a.isFunction(f)?f.call(e,O):O.is(f))I=e,y.dragStart(I,b,c)}}).bind("dragstop",function(a,b){I&&(y.dragStop(I,a,b),I=null)})}function e(b,d){function c(e){var E=a("<td class='fc-header-"+e+"'/>");(e=d.header[e])&&a.each(e.split(" "),function(c){0<c&&E.append("<span class='fc-header-space'/>");var e;a.each(this.split(","),function(c,h){if("title"==h)E.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),e&&e.addClass(f+"-corner-right"),e=null;else{var g;b[h]?g=b[h]:la[h]&&
(g=function(){ia.removeClass(f+"-state-hover");b.changeView(h)});if(g){var q=d.theme?Qa(d.buttonIcons,h):null,m=Qa(d.buttonText,h),ia=a("<span class='fc-button fc-button-"+h+" "+f+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(q?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+q+"'/></span>":m)+"</span><span class='fc-button-effect'><span></span></span></span></span>");ia&&(ia.click(function(){ia.hasClass(f+"-state-disabled")||g()}).mousedown(function(){ia.not("."+
f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){ia.removeClass(f+"-state-down")}).hover(function(){ia.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){ia.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(E),e||ia.addClass(f+"-corner-left"),e=ia)}}});e&&e.addClass(f+"-corner-right")});return E}this.render=function(){f=d.theme?"ui":"fc";if(d.header)return e=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(c("left")).append(c("center")).append(c("right")))};
this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-disabled")};var e=a([]),f}function f(d,c){function e(a,b){f(a,
function(d){if(b==D){if(d){for(var c=0;c<d.length;c++)d[c].source=a,g(d[c]);x=x.concat(d)}z--;z||p(x)}})}function f(b,c){var e,E=ea.sourceFetchers,h;for(e=0;e<E.length;e++){h=E[e](b,r,s,c);if(!0===h)return;if("object"==typeof h){f(h,c);return}}if(e=b.events)a.isFunction(e)?(t++||da("loading",null,!0),e(q(r),q(s),function(a){c(a);--t||da("loading",null,!1)})):a.isArray(e)?c(e):c();else if(b.url){var g=b.success,pb=b.error,m=b.complete;e=a.extend({},b.data||{});E=Da(b.startParam,d.startParam);h=Da(b.endParam,
d.endParam);E&&(e[E]=Math.round(+r/1E3));h&&(e[h]=Math.round(+s/1E3));t++||da("loading",null,!0);a.ajax(a.extend({},qb,b,{data:e,success:function(b){b=b||[];var d=La(g,this,arguments);a.isArray(d)&&(b=d);c(b)},error:function(){La(pb,this,arguments);c()},complete:function(){La(m,this,arguments);--t||da("loading",null,!1)}}))}else c()}function h(b){a.isFunction(b)||a.isArray(b)?b={events:b}:"string"==typeof b&&(b={url:b});if("object"==typeof b){var d=b;d.className?"string"==typeof d.className&&(d.className=
d.className.split(/\s+/)):d.className=[];for(var c=ea.sourceNormalizers,e=0;e<c.length;e++)c[e](d);n.push(b);return b}}function g(a){var c=a.source||{},e=Da(c.ignoreTimezone,d.ignoreTimezone);a._id=a._id||(a.id===b?"_fc"+rb++:a.id+"");a.date&&(a.start||(a.start=a.date),delete a.date);a._start=q(a.start=w(a.start,e));a.end=w(a.end,e);a.end&&a.end<=a.start&&(a.end=null);a._end=a.end?q(a.end):null;a.allDay===b&&(a.allDay=Da(c.allDayDefault,d.allDayDefault));a.className?"string"==typeof a.className&&
(a.className=a.className.split(/\s+/)):a.className=[]}function m(a,b){return a&&b&&k(a)==k(b)}function k(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!r||a<r||b>s};this.fetchEvents=function(a,b){r=a;s=b;x=[];var d=++D,c=n.length;z=c;for(var f=0;f<c;f++)e(n[f],d)};this.addEventSource=function(a){if(a=h(a))z++,e(a,D)};this.removeEventSource=function(b){n=a.grep(n,function(a){return!m(a,b)});x=a.grep(x,function(a){return!m(a.source,b)});p(x)};this.updateEvent=
function(a){var b,d=x.length,c,e=l().defaultEventEnd,f=a.start-a._start,O=a.end?a.end-(a._end||e(a)):0;for(b=0;b<d;b++)c=x[b],c._id==a._id&&c!=a&&(c.start=new Date(+c.start+f),c.end=a.end?c.end?new Date(+c.end+O):new Date(+e(c)+O):null,c.title=a.title,c.url=a.url,c.allDay=a.allDay,c.className=a.className,c.editable=a.editable,c.color=a.color,c.backgroudColor=a.backgroudColor,c.borderColor=a.borderColor,c.textColor=a.textColor,g(c));g(a);p(x)};this.renderEvent=function(a,b){g(a);a.source||(b&&(u.events.push(a),
a.source=u),x.push(a));p(x)};this.removeEvents=function(b){if(b){if(!a.isFunction(b)){var c=b+"";b=function(a){return a._id==c}}x=a.grep(x,b,!0);for(d=0;d<n.length;d++)a.isArray(n[d].events)&&(n[d].events=a.grep(n[d].events,b,!0))}else{x=[];for(var d=0;d<n.length;d++)a.isArray(n[d].events)&&(n[d].events=[])}p(x)};this.clientEvents=function(b){return a.isFunction(b)?a.grep(x,b):b?(b+="",a.grep(x,function(a){return a._id==b})):x};this.normalizeEvent=g;for(var da=this.trigger,l=this.getView,p=this.reportEvents,
u={events:[]},n=[u],r,s,D=0,z=0,t=0,x=[],F=0;F<c.length;F++)h(c[F])}function g(a,b,c){a.setFullYear(a.getFullYear()+b);c||r(a);return a}function k(a,b,c){if(+a){b=a.getMonth()+b;var d=q(a);d.setDate(1);d.setMonth(b);a.setMonth(b);for(c||r(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function h(a,b,c){if(+a){b=a.getDate()+b;var d=q(a);d.setHours(9);d.setDate(b);a.setDate(b);c||r(a);l(a,d)}return a}function l(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:
-1)*sb)}function m(a,b){a.setMinutes(a.getMinutes()+b);return a}function r(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function q(a,b){return b?r(new Date(+a)):new Date(+a)}function u(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function n(a,b,c){for(b=b||1;!a.getDay()||c&&1==a.getDay()||!c&&6==a.getDay();)h(a,b);return a}function s(a,b){return Math.round((q(a,!0)-q(b,!0))/eb)}function D(a,c,d,e){c!==b&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),
a.setFullYear(c));d!==b&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d));e!==b&&a.setDate(e)}function w(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));c===b&&(c=!0);return B(a,c)||(a?new Date(a):null)}return null}function B(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!c)return null;
var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1));c[5]&&(d.setDate(c[5]),e.setDate(c[5]));l(d,e);c[7]&&d.setHours(c[7]);c[8]&&d.setMinutes(c[8]);c[10]&&d.setSeconds(c[10]);c[12]&&d.setMilliseconds(1E3*Number("0."+c[12]));l(d,e)}else d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?1E3*Number("0."+c[12]):0),c[14]&&(e=60*Number(c[16])+(c[18]?Number(c[18]):0),e*="-"==c[15]?1:-1,d=new Date(+d+6E4*
e));return d}function A(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&(b+=12));return 60*b+(a[2]?parseInt(a[2],10):0)}}function H(a,b,c){return T(a,null,b,c)}function T(a,b,c,d){d=d||ka;var e=a,f=b,h,g=c.length,q,m,k,l="";for(h=0;h<g;h++)if(q=c.charAt(h),"'"==q)for(m=h+1;m<g;m++){if("'"==c.charAt(m)){e&&(l=m==h+1?l+"'":l+c.substring(h+
1,m),h=m);break}}else if("("==q)for(m=h+1;m<g;m++){if(")"==c.charAt(m)){h=H(e,c.substring(h+1,m),d);parseInt(h.replace(/\D/,""),10)&&(l+=h);h=m;break}}else if("["==q)for(m=h+1;m<g;m++){if("]"==c.charAt(m)){q=c.substring(h+1,m);h=H(e,q,d);h!=H(f,q,d)&&(l+=h);h=m;break}}else if("{"==q)e=b,f=a;else if("}"==q)e=a,f=b;else{for(m=g;m>h;m--)if(k=tb[c.substring(h,m)]){e&&(l+=k(e,d));h=m-1;break}m==h&&e&&(l+=q)}return l}function S(a){if(a.end){var b=a.end;a=a.allDay;b=q(b);return a||b.getHours()||b.getMinutes()?
h(b,1):r(b)}return h(q(a.start),1)}function aa(a,b){return 100*(b.msLength-a.msLength)+(a.event.start-b.event.start)}function Ea(a,b){return a.end>b.start&&a.start<b.end}function ba(a,b,c,d){var e=[],f,h=a.length,g,m,k,l,n;for(f=0;f<h;f++)g=a[f],m=g.start,k=b[f],k>c&&m<d&&(m<c?(m=q(c),l=!1):l=!0,k>d?(k=q(d),n=!1):n=!0,e.push({event:g,start:m,end:k,isStart:l,isEnd:n,msLength:k-m}));return e.sort(aa)}function wa(a){var b=[],c,d=a.length,e,f,h,g;for(c=0;c<d;c++){e=a[c];for(f=0;;){h=!1;if(b[f])for(g=
0;g<b[f].length;g++)if(Ea(b[f][g],e)){h=!0;break}if(h)f++;else break}b[f]?b[f].push(e):b[f]=[e]}return b}function Fa(c,d,e){c.unbind("mouseover").mouseover(function(c){for(var f=c.target,h;f!=this;)h=f,f=f.parentNode;(f=h._fci)!==b&&(h._fci=b,h=d[f],e(h.event,h.element,h),a(c.target).trigger(c));c.stopPropagation()})}function Ga(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.width(Math.max(0,c-Ra(f,d)))}function fb(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.height(Math.max(0,c-Ca(f,d)))}function Ra(b,
c){var d;d=(parseFloat(a.css(b[0],"paddingLeft",!0))||0)+(parseFloat(a.css(b[0],"paddingRight",!0))||0);var e;e=(parseFloat(a.css(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.css(b[0],"borderRightWidth",!0))||0);d+=e;e=c?(parseFloat(a.css(b[0],"marginLeft",!0))||0)+(parseFloat(a.css(b[0],"marginRight",!0))||0):0;return d+e}function Ca(b,c){var d;d=(parseFloat(a.css(b[0],"paddingTop",!0))||0)+(parseFloat(a.css(b[0],"paddingBottom",!0))||0);var e;e=(parseFloat(a.css(b[0],"borderTopWidth",!0))||0)+
(parseFloat(a.css(b[0],"borderBottomWidth",!0))||0);return d+e+(c?gb(b):0)}function gb(b){return(parseFloat(a.css(b[0],"marginTop",!0))||0)+(parseFloat(a.css(b[0],"marginBottom",!0))||0)}function Ka(a,b){b="number"==typeof b?b+"px":b;a.each(function(a,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function cb(){}function hb(a,b){return a-b}function xa(a){return(10>a?"0":"")+a}function Qa(a,c){if(a[c]!==b)return a[c];for(var d=c.split(/(?=[A-Z])/),e=d.length-1,f;0<=e;e--)if(f=a[d[e].toLowerCase()],
f!==b)return f;return a[""]}function ya(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ib(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function Ma(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Na(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function Sa(a,b){a.each(function(a,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+ub[b.getDay()])})}function jb(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),h=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,d=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,c=a.textColor||c.textColor||b("eventTextColor"),e=[];h&&e.push("background-color:"+h);d&&e.push("border-color:"+d);c&&e.push("color:"+c);return e.join(";")}function La(b,c,d){a.isFunction(b)&&
(b=[b]);if(b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function Da(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==b)return arguments[a]}function vb(b,c,d){function e(b){var c=r(new Date),d;V.each(function(e,f){p.curYear||(p.curYear=p.start);var g=q(p.start);g.setFullYear(g.getFullYear(),e,1);g.setFullYear(g.getFullYear(),e,1-g.getDay());a(f).find("td").each(function(f,q){var m;d=a(q);g.getMonth()==e?(d.removeClass("fc-other-month"),m=z(g,"-yyyy-MM-dd")):(d.addClass("fc-other-month"),
m=" ui-state-disabled");+g==+c&&g.getMonth()==e?d.addClass(G+"-state-highlight fc-today"):d.removeClass(G+"-state-highlight fc-today");var E=d.find("div.fc-day-number");E.text(g.getDate());var k=E.parent().parent();b||(E=k.attr("class").split(" "),a.each(E,function(a,b){-1!==b.indexOf("fc-day")&&k.removeClass(b);k.removeClass("ui-state-disabled")}));k.addClass(G+"-widget-content fc-day"+m);h(g,1)})});P.filter(".fc-year-have-event").removeClass("fc-year-have-event ui-state-default")}function f(a){if(u("selectable")){var b=
this.className.search("fc-day-");-1!=b&&(b=this.className.substring(b+7,b+7+10),b=b.split("-"),b=new Date(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10),0,0,0),v("reportDayClick",this,b,!0,a))}}function g(a,b,c){c&&K.build();c=q(p.visStart);for(var d=h(q(c),L),e=0;e<X;e++){var E=new Date(Math.max(c,a)),k=new Date(Math.min(d,b));if(E<k){var l;I?(l=s(k,c)*C+Q+1,E=s(E,c)*C+Q+1):(l=s(E,c),E=s(k,c));m(e,l,e,E-1).click(f)}h(c,7);h(d,7)}}function m(a,c,d,e){a=K.rect(a,c,d,e,b);return D(a,b)}function k(a){return{row:Math.floor(s(a,
p.visStart)/7),col:n(a.getDay())}}function l(a){var b=a.row;a=a.col;return h(q(p.visStart),7*b+a*C+Q)}function n(a){return(a-Math.max(W,Y)+L)%L*C+Q}var p=this;p.renderYear=function(c,d,g,m){X=d;L=g;(I=u("isRTL"))?(C=-1,Q=L-1):(C=1,Q=0);W=u("firstDay");Y=u("weekends")?0:1;G=u("theme")?"ui":"fc";u("columnFormat");if(c=!t){g=G+"-widget-header";var E=G+"-widget-content",k,l,ra,n=q(p.start),r=ka.dayNamesShortest,da=ka.monthNames;d="<table class='fc-border-separate fc-year-main-table' style='width:100%'><tr >";
for(var ma=0;12>ma;ma++){n.setFullYear(n.getFullYear(),ma,1);n.setFullYear(n.getFullYear(),ma,1-n.getDay());0==ma%3&&0<ma&&(d+="</tr><tr>");d+="<td class='fc-year-monthly-td ui-widget'>";d+="<table class='ui-widget' style='width:100%' cellspacing='0'><thead><tr><th colspan='7' class='fc-year-monthly-header "+g+"' style='height:18px'>"+da[ma]+"</th></tr><tr>";for(k=0;k<L;k++)d+="<th class='fc-year-month-weekly-head'>"+r[k]+"</th>";d+="</tr></thead><tbody>";for(k=0;6>k;k++){d+="<tr class='ui-widget-content fc-week"+
k+"'>";for(l=0;l<L;l++)ra=n.getMonth()==ma?z(n,"-yyyy-MM-dd"):"",d+="<td style='height:32px' class='fc- "+E+" fc-day"+ra+"'><div>"+(m?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'></div></div></td>",h(n,1);d+="</tr>"}d+="</tbody></table>";d+="</td>"}t=a(d+"</tr></table>").appendTo(b);x=t.find("thead");F=x.find("th");V=t.find("table");P=t.find("table tr td");P.click(f);y=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}else w();e(c)};p.setHeight=function(a){pa=
a;a=pa-x.height();t.parent().height(a).css("overflow-y","auto")};p.setWidth=function(a){};p.renderDayOverlay=g;p.defaultSelectionEnd=function(a,b){return q(a)};p.renderSelection=function(a,b,c){g(a,h(q(b),1),!0)};p.clearSelection=function(){A()};p.reportDayClick=function(a,b,c){var d=k(a);v("dayClick",J[d.row*L+d.col],a,b,c)};p.dragStart=function(a,b,c){M.start(function(a){A();a&&m(a.row,a.col,a.row,a.col)},b)};p.dragStop=function(a,b,c){var d=M.stop();A();d&&(d=l(d),v("drop",a,d,!0,b,c))};p.defaultEventEnd=
function(a){return q(a.start)};p.getHoverListener=function(){return M};p.colContentLeft=function(a){return N.left(a)};p.colContentRight=function(a){return N.right(a)};p.dayOfWeekCol=n;p.dateCell=k;p.cellDate=l;p.cellIsAllDay=function(){return!0};p.allDayRow=function(a){return P.eq(a)};p.allDayBounds=function(a){return{left:0,right:ga}};p.getRowCnt=function(){return X};p.getColCnt=function(){return L};p.getColWidth=function(){return ja};p.getBodyRows=function(){return P};p.getDaySegmentContainer=function(){return y};
Ta.call(p,b,c,d);Ua.call(p);Va.call(p);wb.call(p);var u=p.opt,v=p.trigger,w=p.clearEvents,D=p.renderOverlay,A=p.clearOverlays,z=c.formatDate,t,x,F,P,V,J,y,ga,pa,ja,X,L,K,M,N,I,C,Q,W,Y,G;Ma(b.addClass("fc-grid"));K=new Wa(function(b,c){var d,e,f;F.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();P.each(function(c,h){c<X&&(d=a(h),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)});f[1]=e+d.outerHeight()});M=new Xa(K);N=new Ya(function(a){return bodyCellTopInners.eq(a)})}
function wb(){function b(c){var e=q(d.visStart),f=q(d.visEnd),h,g,m=[];h=a.map(c,S);g=[];var k,l=c.length,n,O,u,p,x;for(k=0;k<l;k++)n=c[k],O=n.start,u=h[k],u>e&&O<f&&(O<e?(O=q(e),p=!1):p=!0,u>f?(u=q(f),x=!1):x=!0,g.push({event:n,start:O,end:u,isStart:p,isEnd:x,msLength:u-O}));e=g.sort(aa);c=[];h=e.length;for(f=0;f<h;f++){g=e[f];for(k=0;;){l=!1;if(c[k])for(n=0;n<c[k].length;n++)if(Ea(c[k][n],g)){l=!0;break}if(l)k++;else break}c[k]?c[k].push(g):c[k]=[g]}for(e=0;e<c.length;e++)for(f=c[e],h=0;h<f.length;h++)g=
f[h],g.row=void 0,g.level=e,m.push(g);return m}function c(a,b){var d=D(),g;b.draggable({zIndex:9,delay:50,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),start:function(c,m){f("eventDragStart",b,a,c,m);r(a,b);d.start(function(c,d,f,m){b.draggable("option","revert",!c||!f&&!m);z();c?(g=7*f+m*(e("isRTL")?-1:1),A(h(q(a.start),g),h(S(a),g))):g=0},c,"drag")},stop:function(c,e){d.stop();z();f("eventDragStop",b,a,c,e);g?s(this,a,g,0,a.allDay,c,e):(b.css("filter",""),u(a,b))}})}var d=this;
d.renderEvents=function(c,d){k(c);var e=b(c);try{var f=t();a("div.fc-day-content",f).html("");f.filter("td.fc-year-have-event").removeClass("fc-year-have-event ui-state-default");for(var g,m=0;m<e.length;m++)for(var E=q(e[m].start);E.getTime()<e[m].end.getTime();){g=f.filter(".fc-day-"+H(e[m].start,"yyyy-MM-dd"));g.addClass("fc-year-have-event ui-state-default");var l=a("div.fc-day-content",g).html();""!=a.trim(l)?a("div.fc-day-content",g).html(parseInt(l)+1):a("div.fc-day-content",g).html("1");h(E,
1)}}catch(n){alert("MyrenderDaySegs:"+n)}};d.compileDaySegs=b;d.clearEvents=function(){l();w().empty()};d.bindDaySeg=function(a,b,d){g(a)&&c(a,b);d.isEnd&&m(a)&&x(a,b,d);n(a,b)};Za.call(d);var e=d.opt,f=d.trigger,g=d.isEventDraggable,m=d.isEventResizable,k=d.reportEvents,l=d.reportEventClear,n=d.eventElementHandlers,u=d.showEvents,r=d.hideEvents,s=d.eventDrop,w=d.getDaySegmentContainer,D=d.getHoverListener,A=d.renderDayOverlay,z=d.clearOverlays,t=d.getBodyRows,x=d.resizableDayEvent}function $a(b,
c,d){function e(b){var c=b||1==N,d=v.start.getMonth(),f=r(new Date),h,g,m;c&&V.each(function(b,c){h=a(c);g=u(b);h.html(F(g,Ha));Sa(h,g)});ga.each(function(b,e){h=a(e);g=u(b);g.getMonth()==d?h.removeClass("fc-other-month"):h.addClass("fc-other-month");+g==+f?h.addClass(fa+"-state-highlight fc-today"):h.removeClass(fa+"-state-highlight fc-today");h.find("div.fc-day-number").text(g.getDate());c&&Sa(h,g)});y.each(function(b,c){m=a(c);b<N?(m.show(),b==N-1?m.addClass("fc-last"):m.removeClass("fc-last")):
m.hide()})}function f(a){if(!D("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),b=u(b);A("dayClick",this,b,!0,a)}}function g(a,b,c){c&&C.build();c=q(v.visStart);for(var d=h(q(c),I),e=0;e<N;e++){var k=new Date(Math.max(c,a)),E=new Date(Math.min(d,b));if(k<E){var l;Y?(l=s(E,c)*G+R+1,k=s(k,c)*G+R+1):(l=s(k,c),k=s(E,c));m(e,l,e,k-1).click(f).mousedown(x)}h(c,7);h(d,7)}}function m(a,c,d,e){a=C.rect(a,c,d,e,b);return z(a,b)}function k(a){return{row:Math.floor(s(a,v.visStart)/7),col:w(a.getDay())}}
function l(a){return n(a.row,a.col)}function n(a,b){return h(q(v.visStart),7*a+b*G+R)}function u(a){return n(Math.floor(a/I),a%I)}function w(a){return(a-Math.max(qa,U)+I)%I*G+R}var v=this;v.renderBasic=function(c,d,h,g){N=d;I=h;(Y=D("isRTL"))?(G=-1,R=I-1):(G=1,R=0);qa=D("firstDay");U=D("weekends")?0:1;fa=D("theme")?"ui":"fc";Ha=D("columnFormat");if(d=!J){var m=fa+"-widget-header",q=fa+"-widget-content",k;h="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(k=0;k<
I;k++)h+="<th class='fc- "+m+"'/>";h+="</tr></thead><tbody>";for(k=0;k<c;k++){h+="<tr class='fc-week"+k+"'>";for(m=0;m<I;m++)h+="<td class='fc- "+q+" fc-day"+(k*I+m)+"'><div>"+(g?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";h+="</tr>"}c=a(h+"</tbody></table>").appendTo(b);P=c.find("thead");V=P.find("th");J=c.find("tbody");y=J.find("tr");ga=J.find("td");H=ga.filter(":first-child");ja=y.eq(0).find("div.fc-day-content div");
Na(P.add(P.find("tr")));Na(y);y.eq(0).addClass("fc-first");ga.click(f).mousedown(x);X=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}else B();e(d)};v.setHeight=function(b){K=b;b=K-P.height();var c,d,e;"variable"==D("weekMode")?c=d=Math.floor(b/(1==N?2:6)):(c=Math.floor(b/N),d=b-c*(N-1));H.each(function(b,f){b<N&&(e=a(f),Ka(e.find("> div"),(b==N-1?d:c)-Ca(e)))})};v.setWidth=function(a){L=a;W.clear();M=Math.floor(L/I);Ga(V.slice(0,-1),M)};v.renderDayOverlay=g;v.defaultSelectionEnd=
function(a,b){return q(a)};v.renderSelection=function(a,b,c){g(a,h(q(b),1),!0)};v.clearSelection=function(){t()};v.reportDayClick=function(a,b,c){var d=k(a);A("dayClick",ga[d.row*I+d.col],a,b,c)};v.dragStart=function(a,b,c){Q.start(function(a){t();a&&m(a.row,a.col,a.row,a.col)},b)};v.dragStop=function(a,b,c){var d=Q.stop();t();d&&(d=l(d),A("drop",a,d,!0,b,c))};v.defaultEventEnd=function(a){return q(a.start)};v.getHoverListener=function(){return Q};v.colContentLeft=function(a){return W.left(a)};v.colContentRight=
function(a){return W.right(a)};v.dayOfWeekCol=w;v.dateCell=k;v.cellDate=l;v.cellIsAllDay=function(){return!0};v.allDayRow=function(a){return y.eq(a)};v.allDayBounds=function(a){return{left:0,right:L}};v.getRowCnt=function(){return N};v.getColCnt=function(){return I};v.getColWidth=function(){return M};v.getDaySegmentContainer=function(){return X};Ta.call(v,b,c,d);Ua.call(v);Va.call(v);xb.call(v);var D=v.opt,A=v.trigger,B=v.clearEvents,z=v.renderOverlay,t=v.clearOverlays,x=v.daySelectionMousedown,F=
c.formatDate,P,V,J,y,ga,H,ja,X,L,K,M,N,I,C,Q,W,Y,G,R,qa,U,fa,Ha;Ma(b.addClass("fc-grid"));C=new Wa(function(b,c){var d,e,f;V.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();y.each(function(c,h){c<N&&(d=a(h),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)});f[1]=e+d.outerHeight()});Q=new Xa(C);W=new Ya(function(a){return ja.eq(a)})}function xb(){function b(c){var e=t(),f=x(),g=q(d.visStart),f=h(q(g),f),m=a.map(c,S),k,l,n,u,O,p,r=[];for(k=0;k<e;k++){l=wa(ba(c,
m,g,f));for(n=0;n<l.length;n++)for(u=l[n],O=0;O<u.length;O++)p=u[O],p.row=k,p.level=n,r.push(p);h(g,7);h(f,7)}return r}function c(a,b){var d=D(),g;b.draggable({zIndex:9,delay:50,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),start:function(c,m){f("eventDragStart",b,a,c,m);r(a,b);d.start(function(c,d,f,m){b.draggable("option","revert",!c||!f&&!m);z();c?(g=7*f+m*(e("isRTL")?-1:1),A(h(q(a.start),g),h(S(a),g))):g=0},c,"drag")},stop:function(c,e){d.stop();z();f("eventDragStop",b,a,c,e);
g?s(this,a,g,0,a.allDay,c,e):(b.css("filter",""),u(a,b))}})}var d=this;d.renderEvents=function(a,c){k(a);F(b(a),c)};d.compileDaySegs=b;d.clearEvents=function(){l();w().empty()};d.bindDaySeg=function(a,b,d){g(a)&&c(a,b);d.isEnd&&m(a)&&P(a,b,d);n(a,b)};Za.call(d);var e=d.opt,f=d.trigger,g=d.isEventDraggable,m=d.isEventResizable,k=d.reportEvents,l=d.reportEventClear,n=d.eventElementHandlers,u=d.showEvents,r=d.hideEvents,s=d.eventDrop,w=d.getDaySegmentContainer,D=d.getHoverListener,A=d.renderDayOverlay,
z=d.clearOverlays,t=d.getRowCnt,x=d.getColCnt,F=d.renderDaySegs,P=d.resizableDayEvent}function nb(c,d,e){function f(){function a(){U.scrollTop(d)}var b=u(),c=q(b);c.setHours(x("firstHour"));var d=v(b,c)+1;a();setTimeout(a,0)}function g(a){if(!x("selectable")){var b=Math.min(ha-1,Math.floor((a.pageX-L.offset().left-ta)/Oa)),c=w(b),d=this.parentNode.className.match(/fc-slot(\d+)/);d?(d=parseInt(d[1])*x("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+ua),F("dayClick",I[b],c,!1,a)):F("dayClick",
I[b],c,!0,a)}}function k(a,b,c){c&&va.build();var d=q(t.visStart);la?(c=s(b,d)*aa+ba+1,a=s(a,d)*aa+ba+1):(c=s(a,d),a=s(b,d));c=Math.max(0,c);a=Math.min(ha,a);c<a&&l(0,c,0,a-1).click(g).mousedown(pa)}function l(a,b,c,d){a=va.rect(a,b,c,d,Y);return V(a,Y)}function n(a,b){for(var c=q(t.visStart),d=h(q(c),1),e=0;e<ha;e++){var f=new Date(Math.max(c,a)),m=new Date(Math.min(d,b));if(f<m){var k=e*aa+ba,k=va.rect(0,k,0,k,fa),f=v(c,f),m=v(c,m);k.top=f;k.height=m-f;V(k,fa).click(g).mousedown(S)}h(c,1);h(d,1)}}
function da(a){var b=w(a.col);a=a.row;x("allDaySlot")&&a--;0<=a&&m(b,ua+a*x("slotMinutes"));return b}function w(a){return h(q(t.visStart),a*aa+ba)}function p(a){return x("allDaySlot")&&!a.row}function D(a){return(a-Math.max(ea,wa)+ha)%ha*aa+ba}function v(a,c){a=q(a,!0);if(c<m(q(a),ua))return 0;if(c>=m(q(a),ka))return sa.height();var d=x("slotMinutes"),e=60*c.getHours()+c.getMinutes()-ua,f=Math.floor(e/d),h=T[f];h===b&&(h=T[f]=sa.find("tr:eq("+f+") td div")[0].offsetTop);return Math.max(0,Math.round(h-
1+e%d/d*Ia))}function B(b,c){var d=x("selectHelper");va.build();if(d){var e=s(b,t.visStart)*aa+ba;if(0<=e&&e<ha){var e=va.rect(0,e,0,e,fa),f=v(b,b),h=v(b,c);if(h>f){e.top=f;e.height=h-f;e.left+=2;e.width-=5;if(a.isFunction(d)){if(d=d(b,c))e.position="absolute",e.zIndex=8,na=a(d).css(e).appendTo(fa)}else e.isStart=!0,e.isEnd=!0,na=a(ja({title:"",start:b,end:c,className:["fc-select-helper"],editable:!1},e)),na.css("opacity",x("dragOpacity"));na&&(na.click(g).mousedown(S),fa.append(na),Ga(na,e.width,
!0),fb(na,e.height,!0))}}}else n(b,c)}function H(){J();na&&(na.remove(),na=null)}function S(b){if(1==b.which&&x("selectable")){ga(b);var c;Aa.start(function(a,b){H();if(a&&a.col==b.col&&!p(a)){var d=da(b),e=da(a);c=[d,m(q(d),x("slotMinutes")),e,m(q(e),x("slotMinutes"))].sort(hb);B(c[0],c[3])}else c=null},b);a(document).one("mouseup",function(a){Aa.stop();c&&(+c[0]==+c[1]&&z(c[0],!1,a),y(c[0],c[3],!1,a))})}}function z(a,b,c){F("dayClick",I[D(a.getDay())],a,b,c)}var t=this;t.renderAgenda=function(b){ha=
b;Ja=x("theme")?"ui":"fc";wa=x("weekends")?0:1;ea=x("firstDay");(la=x("isRTL"))?(aa=-1,ba=ha-1):(aa=1,ba=0);ua=A(x("minTime"));ka=A(x("maxTime"));Fa=x("columnFormat");if(L)P();else{b=Ja+"-widget-header";var d=Ja+"-widget-content",e,f,h,k,l,n=0==x("slotMinutes")%15;e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ha;f++)e+="<th class='fc- fc-col"+f+" "+b+"'/>";e+="<th class='fc-agenda-gutter "+
b+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ha;f++)e+="<td class='fc- fc-col"+f+" "+d+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";L=a(e+("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody></table>")).appendTo(c);K=L.find("thead");M=K.find("th").slice(1,-1);N=L.find("tbody");I=N.find("td").slice(0,-1);C=I.find("div.fc-day-content div");Q=I.eq(0);W=Q.find("> div");Na(K.add(K.find("tr")));
Na(N.add(N.find("tr")));ra=K.find("th:first");za=L.find(".fc-agenda-gutter");Y=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c);x("allDaySlot")?(G=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Y),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+x("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",
R=a(e).appendTo(Y),qa=R.find("tr"),qa.find("td").click(g).mousedown(pa),ra=ra.add(R.find("th:first")),za=za.add(R.find("th.fc-agenda-gutter")),Y.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):G=a([]);U=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(Y);fa=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(U);Ha=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(fa);e=
"<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";h=u();k=m(q(h),ka);m(h,ua);for(f=ab=0;h<k;f++)l=h.getMinutes(),e+="<tr class='fc-slot"+f+" "+(l?"fc-minor":"")+"'><th class='fc-agenda-axis "+b+"'>"+(n&&l?"&nbsp;":X(h,x("axisFormat")))+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>",m(h,x("slotMinutes")),ab++;e+="</tbody></table>";sa=a(e).appendTo(fa);kb=sa.find("div:first");sa.find("td").click(g).mousedown(S);ra=ra.add(sa.find("th:first"))}h=
r(new Date);for(b=0;b<ha;b++)f=w(b),d=M.eq(b),d.html(X(f,Fa)),e=I.eq(b),+f==+h?e.addClass(Ja+"-state-highlight fc-today"):e.removeClass(Ja+"-state-highlight fc-today"),Sa(d.add(e),f)};t.setWidth=function(b){lb=b;Pa.clear();ta=0;Ga(ra.width("").each(function(b,c){ta=Math.max(ta,a(c).outerWidth())}),ta);b=U[0].clientWidth;(bb=U.width()-b)?(Ga(za,bb),za.show().prev().removeClass("fc-last")):za.hide().prev().addClass("fc-last");Oa=Math.floor((b-ta)/ha);Ga(M.slice(0,-1),Oa)};t.setHeight=function(a,c){a===
b&&(a=mb);mb=a;T={};var d=N.position().top,e=U.position().top,h=Math.min(a-d,sa.height()+e+1);W.height(h-Ca(Q));Y.css("top",d);U.height(h-e-1);Ia=kb.height()+1;c&&f()};t.beforeHide=function(){ob=U.scrollTop()};t.afterShow=function(){U.scrollTop(ob)};t.defaultEventEnd=function(a){var b=q(a.start);return a.allDay?b:m(b,x("defaultEventMinutes"))};t.timePosition=v;t.dayOfWeekCol=D;t.dateCell=function(a){return{row:Math.floor(s(a,t.visStart)/7),col:D(a.getDay())}};t.cellDate=da;t.cellIsAllDay=p;t.allDayRow=
function(a){return qa};t.allDayBounds=function(){return{left:ta,right:lb-bb}};t.getHoverListener=function(){return Aa};t.colContentLeft=function(a){return Pa.left(a)};t.colContentRight=function(a){return Pa.right(a)};t.getDaySegmentContainer=function(){return G};t.getSlotSegmentContainer=function(){return Ha};t.getMinMinute=function(){return ua};t.getMaxMinute=function(){return ka};t.getBodyContent=function(){return fa};t.getRowCnt=function(){return 1};t.getColCnt=function(){return ha};t.getColWidth=
function(){return Oa};t.getSlotHeight=function(){return Ia};t.defaultSelectionEnd=function(a,b){return b?q(a):m(q(a),x("slotMinutes"))};t.renderDayOverlay=k;t.renderSelection=function(a,b,c){c?x("allDaySlot")&&k(a,h(q(b),1),!0):B(a,b)};t.clearSelection=H;t.reportDayClick=z;t.dragStart=function(a,b,c){Aa.start(function(a){J();if(a)if(p(a))l(a.row,a.col,a.row,a.col);else{a=da(a);var b=m(q(a),x("defaultEventMinutes"));n(a,b)}},b)};t.dragStop=function(a,b,c){var d=Aa.stop();J();d&&F("drop",a,da(d),p(d),
b,c)};Ta.call(t,c,d,e);Ua.call(t);Va.call(t);yb.call(t);var x=t.opt,F=t.trigger,P=t.clearEvents,V=t.renderOverlay,J=t.clearOverlays,y=t.reportSelection,ga=t.unselect,pa=t.daySelectionMousedown,ja=t.slotSegHtml,X=d.formatDate,L,K,M,N,I,C,Q,W,Y,G,R,qa,U,fa,Ha,sa,kb,ra,za,na,lb,mb,ta,Oa,bb,Ia,ob,ha,ab,va,Aa,Pa,T={},Ja,ea,wa,la,aa,ba,ua,ka,Fa;Ma(c.addClass("fc-agenda"));va=new Wa(function(b,c){var d,e,f;M.each(function(b,h){d=a(h);e=d.offset().left;b&&(f[1]=e);f=[e];c[b]=f});f[1]=e+d.outerWidth();x("allDaySlot")&&
(d=qa,e=d.offset().top,b[0]=[e,e+d.outerHeight()]);for(var h=fa.offset().top,g=U.offset().top,m=g+U.outerHeight(),k=0;k<ab;k++)b.push([Math.max(g,Math.min(m,h+Ia*k)),Math.max(g,Math.min(m,h+Ia*(k+1)))])});Aa=new Xa(va);Pa=new Ya(function(a){return C.eq(a)})}function yb(){function c(b){b=wa(ba(b,a.map(b,S),n.visStart,n.visEnd));var d,e=b.length,f,h,g,m=[];for(d=0;d<e;d++)for(f=b[d],h=0;h<f.length;h++)g=f[h],g.row=0,g.level=d,m.push(g);return m}function d(a){return a.end?q(a.end):m(q(a.start),u("defaultEventMinutes"))}
function e(a,b){var c="<",d=a.url,f=jb(a,u),h=f?" style='"+f+"'":"",g=["fc-event","fc-event-skin","fc-event-vert"];p(a)&&g.push("fc-event-draggable");b.isStart&&g.push("fc-corner-top");b.isEnd&&g.push("fc-corner-bottom");g=g.concat(a.className);a.source&&(g=g.concat(a.source.className||[]));c=d?c+("a href='"+ya(a.url)+"'"):c+"div";c+=" class='"+g.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+f+"'><div class='fc-event-inner fc-event-skin'"+h+"><div class='fc-event-head fc-event-skin'"+
h+"><div class='fc-event-time'>"+ya(U(a.start,a.end,u("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+ya(a.title)+"</div></div><div class='fc-event-bg'></div></div>";b.isEnd&&s(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(d?"a":"div")+">")}function f(a,b,c){var d=b.find("div.fc-event-time");p(a)&&k(a,b,d);c.isEnd&&s(a)&&l(a,b,d);B(a,b)}function g(a,b,c){function d(){m||(b.width(e).height("").draggable("option","grid",null),
m=!0)}var e,f,m=!0,k,n=u("isRTL")?-1:1,l=F(),E=L(),p=K(),O=V();b.draggable({zIndex:9,opacity:u("dragOpacity","month"),revertDuration:u("dragRevertDuration"),start:function(g,O){r("eventDragStart",b,a,g,O);C(a,b);e=b.width();l.start(function(e,g,l,r){G();e?(f=!1,k=r*n,e.row?c?m&&(b.width(E-10),fb(b,p*Math.round((a.end?(a.end-a.start)/zb:u("defaultEventMinutes"))/u("slotMinutes"))),b.draggable("option","grid",[E,1]),m=!1):f=!0:(Y(h(q(a.start),k),h(S(a),k)),d()),f=f||m&&!k):(d(),f=!0);b.draggable("option",
"revert",f)},g,"drag")},stop:function(c,e){l.stop();G();r("eventDragStop",b,a,c,e);if(f)d(),b.css("filter",""),I(a,b);else{var h=0;m||(h=Math.round((b.offset().top-M().offset().top)/p)*u("slotMinutes")+O-(60*a.start.getHours()+a.start.getMinutes()));Q(this,a,k,h,m,c,e)}}})}function k(a,b,c){function d(b){var e=m(q(a.start),b),f;a.end&&(f=m(q(a.end),b));c.text(U(e,f,u("timeFormat")))}function e(){g&&(c.css("display",""),b.draggable("option","grid",[s,w]),g=!1)}var f,g=!1,n,l,E,p=u("isRTL")?-1:1,O=
F(),x=X(),s=L(),w=K();b.draggable({zIndex:9,scroll:!1,grid:[s,w],axis:1==x?"y":!1,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(d,m){r("eventDragStart",b,a,d,m);C(a,b);f=b.position();l=E=0;O.start(function(d,f,m,k){b.draggable("option","revert",!d);G();d&&(n=k*p,u("allDaySlot")&&!d.row?(g||(g=!0,c.hide(),b.draggable("option","grid",null)),Y(h(q(a.start),n),h(S(a),n))):e())},d,"drag")},drag:function(a,b){l=Math.round((b.position.top-f.top)/w)*u("slotMinutes");l!=E&&
(g||d(l),E=l)},stop:function(c,h){var m=O.stop();G();r("eventDragStop",b,a,c,h);m&&(n||l||g)?Q(this,a,n,g?0:l,g,c,h):(e(),b.css("filter",""),b.css(f),d(0),I(a,b))}})}function l(a,b,c){var d,e,f=K();b.resizable({handles:{s:"div.ui-resizable-s"},grid:f,start:function(c,f){d=e=0;C(a,b);b.css("z-index",9);r("eventResizeStart",this,a,c,f)},resize:function(h,g){d=Math.round((Math.max(f,b.height())-g.originalSize.height)/f);d!=e&&(c.text(U(a.start,d||a.end?m(w(a),u("slotMinutes")*d):null,u("timeFormat"))),
e=d)},stop:function(c,e){r("eventResizeStop",this,a,c,e);d?W(this,a,0,u("slotMinutes")*d,c,e):(b.css("z-index",8),I(a,b))}})}var n=this;n.renderEvents=function(g,k){D(g);var l,p=g.length,s=[],w=[];for(l=0;l<p;l++)g[l].allDay?s.push(g[l]):w.push(g[l]);u("allDaySlot")&&(T(c(s),k),z());var p=X(),s=V(),t=P(),ca=m(q(n.visStart),s),v=a.map(w,d),G,C,F,Z,R,Q;l=[];for(G=0;G<p;G++){F=C=wa(ba(w,v,ca,m(q(ca),t-s)));var U=Q=R=Z=void 0,W=void 0,A=void 0;for(Z=F.length-1;0<Z;Z--)for(U=F[Z],R=0;R<U.length;R++)for(W=
U[R],Q=0;Q<F[Z-1].length;Q++)A=F[Z-1][Q],Ea(W,A)&&(A.forward=Math.max(A.forward||0,(W.forward||0)+1));for(F=0;F<C.length;F++)for(Z=C[F],R=0;R<Z.length;R++)Q=Z[R],Q.col=G,Q.level=F,l.push(Q);h(ca,1,!0)}var w=l.length,oa,Y,B;C="";t={};ca={};G=x();p=X();(F=u("isRTL"))?(Z=-1,U=p-1):(Z=1,U=0);for(p=0;p<w;p++)s=l[p],v=s.event,R=J(s.start,s.start),Q=J(s.start,s.end),oa=s.col,W=s.level,A=s.forward||0,Y=y(oa*Z+U),B=H(oa*Z+U)-Y,B=Math.min(B-6,0.95*B),oa=W?B/(W+A+1):A?2*(B/(A+1)-6):B,W=Y+B/(W+A+1)*W*Z+(F?B-
oa:0),s.top=R,s.left=W,s.outerWidth=oa,s.outerHeight=Q-R,C+=e(v,s);G[0].innerHTML=C;F=G.children();for(p=0;p<w;p++)s=l[p],v=s.event,C=a(F[p]),Z=r("eventRender",v,v,C),!1===Z?C.remove():(Z&&!0!==Z&&(C.remove(),C=a(Z).css({position:"absolute",top:s.top,left:s.left}).appendTo(G)),s.element=C,v._id===k?f(v,C,s):C[0]._fci=p,N(v,C));Fa(G,l,f);for(p=0;p<w;p++)if(s=l[p],C=s.element)G=t[v=s.key=ib(C[0])],s.vsides=G===b?t[v]=Ca(C,!0):G,G=ca[v],s.hsides=G===b?ca[v]=Ra(C,!0):G,v=C.find("div.fc-event-content"),
v.length&&(s.contentTop=v[0].offsetTop);for(p=0;p<w;p++)if(s=l[p],C=s.element)C[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",t=Math.max(0,s.outerHeight-s.vsides),C[0].style.height=t+"px",v=s.event,s.contentTop!==b&&10>t-s.contentTop&&(C.find("div.fc-event-time").text(qa(v.start,u("timeFormat"))+" - "+v.title),C.find("div.fc-event-title").remove()),r("eventAfterRender",v,v,C)};n.compileDaySegs=c;n.clearEvents=function(){A();t().empty();x().empty()};n.slotSegHtml=e;n.bindDaySeg=function(a,
b,c){p(a)&&g(a,b,c.isStart);c.isEnd&&s(a)&&ja(a,b,c);B(a,b)};Za.call(n);var u=n.opt,r=n.trigger,p=n.isEventDraggable,s=n.isEventResizable,w=n.eventEnd,D=n.reportEvents,A=n.reportEventClear,B=n.eventElementHandlers,z=n.setHeight,t=n.getDaySegmentContainer,x=n.getSlotSegmentContainer,F=n.getHoverListener,P=n.getMaxMinute,V=n.getMinMinute,J=n.timePosition,y=n.colContentLeft,H=n.colContentRight,T=n.renderDaySegs,ja=n.resizableDayEvent,X=n.getColCnt,L=n.getColWidth,K=n.getSlotHeight,M=n.getBodyContent,
N=n.reportEventElement,I=n.showEvents,C=n.hideEvents,Q=n.eventDrop,W=n.eventResize,Y=n.renderDayOverlay,G=n.clearOverlays,R=n.calendar,qa=R.formatDate,U=R.formatDates}function Ta(a,c,d){function e(a,b){var c=t[a];return"object"==typeof c?Qa(c,b||d):c}function f(a,b){return c.trigger.apply(c,[a,b||p].concat(Array.prototype.slice.call(arguments,2),[p]))}function g(a){return Da(a.editable,(a.source||{}).editable,e("editable"))}function k(a){return a.end?q(a.end):s(a)}function n(a,b,c){a=z[a._id];var d,
e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function l(a,c,d,e){d=d||0;for(var f,g=a.length,k=0;k<g;k++)f=a[k],e!==b&&(f.allDay=e),m(h(f.start,c,!0),d),f.end&&(f.end=m(h(f.end,c,!0),d)),r(f,t)}function u(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=m(h(k(d),b,!0),c),r(d,t)}var p=this;p.element=a;p.calendar=c;p.name=d;p.opt=e;p.trigger=f;p.isEventDraggable=function(a){return g(a)&&!e("disableDragging")};p.isEventResizable=function(a){return g(a)&&!e("disableResizing")};
p.reportEvents=function(a){D={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],D[d._id]?D[d._id].push(d):D[d._id]=[d]};p.eventEnd=k;p.reportEventElement=function(a,b){A.push(b);z[a._id]?z[a._id].push(b):z[a._id]=[b]};p.reportEventClear=function(){A=[];z={}};p.eventElementHandlers=function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return f("eventClick",this,a,c)}).hover(function(b){f("eventMouseover",this,a,b)},function(b){f("eventMouseout",this,
a,b)})};p.showEvents=function(a,b){n(a,b,"show")};p.hideEvents=function(a,b){n(a,b,"hide")};p.eventDrop=function(a,b,c,d,e,g,h){var m=b.allDay,k=b._id;l(D[k],c,d,e);f("eventDrop",a,b,c,d,e,function(){l(D[k],-c,-d,m);w(k)},g,h);w(k)};p.eventResize=function(a,b,c,d,e,g){var h=b._id;u(D[h],c,d);f("eventResize",a,b,c,d,function(){u(D[h],-c,-d);w(h)},e,g);w(h)};var s=p.defaultEventEnd,r=c.normalizeEvent,w=c.reportEventChange,D={},A=[],z={},t=c.options}function Za(){function c(a){var b=u("isRTL"),d,e=a.length,
f,g,h,m;d=S();var k=d.left,l=d.right,q,n,p,E,O,w="";for(d=0;d<e;d++)f=a[d],g=f.event,m=["fc-event","fc-event-skin","fc-event-hori"],s(g)&&m.push("fc-event-draggable"),b?(f.isStart&&m.push("fc-corner-right"),f.isEnd&&m.push("fc-corner-left"),q=T(f.end.getDay()-1),n=T(f.start.getDay()),p=f.isEnd?J(q):k,E=f.isStart?y(n):l):(f.isStart&&m.push("fc-corner-left"),f.isEnd&&m.push("fc-corner-right"),q=T(f.start.getDay()),n=T(f.end.getDay()-1),p=f.isStart?J(q):k,E=f.isEnd?y(n):l),m=m.concat(g.className),g.source&&
(m=m.concat(g.source.className||[])),h=g.url,O=jb(g,u),w=h?w+("<a href='"+ya(h)+"'"):w+"<div",w+=" class='"+m.join(" ")+"' style='position:absolute;z-index:8;left:"+p+"px;"+O+"'><div class='fc-event-inner fc-event-skin'"+(O?" style='"+O+"'":"")+">",!g.allDay&&f.isStart&&(w+="<span class='fc-event-time'>"+ya(K(g.start,g.end,u("timeFormat")))+"</span>"),w+="<span class='fc-event-title'>"+ya(g.title)+"</span></div>",f.isEnd&&r(g)&&(w+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),
w+="</"+(h?"a":"div")+">",f.left=p,f.outerWidth=E-p,f.startCol=q,f.endCol=n+1;return w}function d(b,c){var e,f=b.length,g,h,m;for(e=0;e<f;e++)g=b[e],h=g.event,m=a(c[e]),h=p("eventRender",h,h,m),!1===h?m.remove():(h&&!0!==h&&(h=a(h).css({position:"absolute",left:g.left}),m.replaceWith(h),m=h),g.element=m)}function e(a){var c,d=a.length,f,g,h,m,k={};for(c=0;c<d;c++)if(f=a[c],g=f.element)h=f.key=ib(g[0]),m=k[h],m===b&&(m=k[h]=Ra(g,!0)),f.hsides=m}function f(a){var b,c=a.length,d,e;for(b=0;b<c;b++)if(d=
a[b],e=d.element)e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px"}function g(a){var c,d=a.length,e,f,h,m,k={};for(c=0;c<d;c++)if(e=a[c],f=e.element)h=e.key,m=k[h],m===b&&(m=k[h]=gb(f)),e.outerHeight=f[0].offsetHeight+m}function m(){var a,b=x(),c=[];for(a=0;a<b;a++)c[a]=H(a).find("td:first div.fc-day-content > div");return c}function k(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function n(a,b){var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=a[c],f=e.element)f[0].style.top=
b[e.row]+(e.top||0)+"px",e=e.event,p("eventAfterRender",e,e,f)}var l=this;l.renderDaySegs=function(a,b){var h=X(),l=x(),q=B(),u=0,p,s,r,w=a.length,v,t;h[0].innerHTML=c(a);d(a,h.children());s=a.length;for(p=0;p<s;p++)r=a[p],(t=r.element)&&D(r.event,t);s=a.length;var A;for(p=0;p<s;p++)if(r=a[p],t=r.element)A=r.event,A._id===b?L(A,t,r):t[0]._fci=p;Fa(h,a,L);e(a);f(a);g(a);h=m();for(p=0;p<l;p++){s=[];for(r=0;r<q;r++)s[r]=0;for(;u<w&&(v=a[u]).row==p;){r=s.slice(v.startCol,v.endCol);r=Math.max.apply(Math,
r);v.top=r;r+=v.outerHeight;for(t=v.startCol;t<v.endCol;t++)s[t]=r;u++}h[p].height(Math.max.apply(Math,s))}n(a,k(h))};l.resizableDayEvent=function(b,r,s){var v=u("isRTL"),D=v?"w":"e",y=r.find("div.ui-resizable-"+D),H=!1;Ma(r);r.mousedown(function(a){a.preventDefault()}).click(function(a){H&&(a.preventDefault(),a.stopImmediatePropagation())});y.mousedown(function(u){function y(c){p("eventResizeStop",this,b,c);a("body").css("cursor","");db.stop();N();Ba&&t(this,b,Ba,0,c);setTimeout(function(){H=!1},
0)}if(1==u.which){H=!0;var db=l.getHoverListener(),J=x(),K=B(),L=v?-1:1,P=v?K-1:0,R=r.css("top"),Ba,T,S=a.extend({},b),V=aa(b.start);I();a("body").css("cursor",D+"-resize").one("mouseup",y);p("eventResizeStart",this,b,u);db.start(function(l,u){if(l){var p=Math.max(V.row,l.row),r=l.col;1==J&&(p=0);p==V.row&&(r=v?Math.min(V.col,r):Math.max(V.col,r));Ba=7*p+r*L+P-(7*u.row+u.col*L+P);p=h(w(b),Ba,!0);if(Ba){S.end=p;var r=T,t=ba([S]),x=s.row,y=a("<div/>"),B=X(),da=t.length,H;y[0].innerHTML=c(t);y=y.children();
B.append(y);d(t,y);e(t);f(t);g(t);n(t,k(m()));y=[];for(B=0;B<da;B++)if(H=t[B].element)t[B].row===x&&H.css("top",R),y.push(H[0]);T=a(y);T.find("*").css("cursor",D+"-resize");r&&r.remove();z(b)}else T&&(A(b),T.remove(),T=null);N();M(b.start,h(q(p),1))}},u)}})};var u=l.opt,p=l.trigger,s=l.isEventDraggable,r=l.isEventResizable,w=l.eventEnd,D=l.reportEventElement,A=l.showEvents,z=l.hideEvents,t=l.eventResize,x=l.getRowCnt,B=l.getColCnt,H=l.allDayRow,S=l.allDayBounds,J=l.colContentLeft,y=l.colContentRight,
T=l.dayOfWeekCol,aa=l.dateCell,ba=l.compileDaySegs,X=l.getDaySegmentContainer,L=l.bindDaySeg,K=l.calendar.formatDates,M=l.renderDayOverlay,N=l.clearOverlays,I=l.clearSelection}function Va(){function b(a){k&&(k=!1,m(),f("unselect",null,a))}function c(a,b,d,e){k=!0;f("select",null,a,b,d,e)}var d=this;d.select=function(a,d,e){b();d||(d=h(a,e));g(a,d,e);c(a,d,e)};d.unselect=b;d.reportSelection=c;d.daySelectionMousedown=function(f){var h=d.cellDate,k=d.cellIsAllDay,l=d.getHoverListener(),q=d.reportDayClick;
if(1==f.which&&e("selectable")){b(f);var n;l.start(function(a,b){m();a&&k(a)?(n=[h(b),h(a)].sort(hb),g(n[0],n[1],!0)):n=null},f);a(document).one("mouseup",function(a){l.stop();n&&(+n[0]==+n[1]&&q(n[0],!0,a),c(n[0],n[1],!0,a))})}};var e=d.opt,f=d.trigger,h=d.defaultSelectionEnd,g=d.renderSelection,m=d.clearSelection,k=!1;e("selectable")&&e("unselectAuto")&&a(document).mousedown(function(c){var d=e("unselectCancel");d&&a(c.target).parents(d).length||b(c)})}function Ua(){this.renderOverlay=function(d,
e){var f=c.shift();f||(f=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));f[0].parentNode!=e[0]&&f.appendTo(e);b.push(f.css(d).show());return f};this.clearOverlays=function(){for(var a;a=b.shift();)c.push(a.hide().unbind())};var b=[],c=[]}function Wa(a){var b,c;this.build=function(){b=[];c=[];a(b,c)};this.cell=function(a,d){var e=b.length,f=c.length,h,g=-1,m=-1;for(h=0;h<e;h++)if(d>=b[h][0]&&d<b[h][1]){g=h;break}for(h=0;h<f;h++)if(a>=c[h][0]&&a<c[h][1]){m=h;break}return 0<=
g&&0<=m?{row:g,col:m}:null};this.rect=function(a,d,e,f,h){h=h.offset();return{top:b[a][0]-h.top,left:c[d][0]-h.left,width:c[f][1]-c[d][0],height:b[e][1]-b[a][0]}}}function Xa(c){function d(a){a.pageX===b&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY);a=c.cell(a.pageX,a.pageY);if(!a!=!g||a&&(a.row!=g.row||a.col!=g.col))a?(h||(h=a),f(a,h,a.row-h.row,a.col-h.col)):f(a,h),g=a}var e,f,h,g;this.start=function(b,m,k){f=b;h=g=null;c.build();d(m);e=k||"mousemove";a(document).bind(e,d)};this.stop=
function(){a(document).unbind(e,d);return g}}function Ya(a){var c=this,d={},e={},f={};c.left=function(c){return e[c]=e[c]===b?(d[c]=d[c]||a(c)).position().left:e[c]};c.right=function(e){return f[e]=f[e]===b?c.left(e)+(d[e]=d[e]||a(e)).width():f[e]};c.clear=function(){d={};e={};f={}}}var ka={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{year:"yyyy",
month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{year:"MMMM",month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesShortest:"SMTWTFS".split(""),buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",year:"year",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},Ab={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},
buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},ea=a.fullCalendar={version:"1.5.1"},la=ea.views={};a.fn.fullCalendar=function(d){if("string"==typeof d){var e=Array.prototype.slice.call(arguments,1),f;this.each(function(){var c=a.data(this,"fullCalendar");c&&a.isFunction(c[d])&&(c=c[d].apply(c,e),f===b&&(f=c),"destroy"==d&&a.removeData(this,"fullCalendar"))});return f!==b?f:this}var h=d.eventSources||[];delete d.eventSources;d.events&&(h.push(d.events),delete d.events);d=a.extend(!0,
{},ka,d.isRTL||d.isRTL===b&&ka.isRTL?Ab:{},d);this.each(function(b,e){var f=a(e),g=new c(f,d,h);f.data("fullCalendar",g);g.render()});return this};ea.sourceNormalizers=[];ea.sourceFetchers=[];var qb={dataType:"json",cache:!1},rb=1;ea.addDays=h;ea.cloneDate=q;ea.parseDate=w;ea.parseISO8601=B;ea.parseTime=A;ea.formatDate=H;ea.formatDates=T;var ub="sun mon tue wed thu fri sat".split(" "),eb=864E5,sb=36E5,zb=6E4,tb={s:function(a){return a.getSeconds()},ss:function(a){return xa(a.getSeconds())},m:function(a){return a.getMinutes()},
mm:function(a){return xa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return xa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return xa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return xa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},e:function(a,b){return b.dayNamesShortest[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return xa(a.getMonth()+
1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return H(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>
a?"th":["st","nd","rd"][a%10-1]||"th"}};ea.applyAll=La;la.year=function(a,b){var c=this;c.render=function(a,b){b&&(c.curYear=g(a,b));var h=q(a,!0);h.setFullYear(h.getFullYear(),0,1);var m=q(a);m.setFullYear(m.getFullYear(),11,31);var k=q(h),l=q(m),n=d("weekends")?0:1;c.title=f(h,d("titleFormat"));c.start=h;c.end=m;c.visStart=k;c.visEnd=l;e("4x3",6,n?5:7,!0)};vb.call(c,a,b,"year");var d=c.opt,e=c.renderYear,f=b.formatDate};la.month=function(a,b){var c=this;c.render=function(a,b){b&&(k(a,b),a.setDate(1));
var g=q(a,!0);g.setDate(1);var m=k(q(g),1),l=q(g),u=q(m),r=d("firstDay"),s=d("weekends")?0:1;s&&(n(l),n(u,-1,!0));h(l,-((l.getDay()-Math.max(r,s)+7)%7));h(u,(7-u.getDay()+Math.max(r,s))%7);r=Math.round((u-l)/(7*eb));"fixed"==d("weekMode")&&(h(u,7*(6-r)),r=6);c.title=f(g,d("titleFormat"));c.start=g;c.end=m;c.visStart=l;c.visEnd=u;e(6,r,s?5:7,!0)};$a.call(c,a,b,"month");var d=c.opt,e=c.renderBasic,f=b.formatDate};la.basicWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);var g=h(q(a),
-((a.getDay()-d("firstDay")+7)%7)),m=h(q(g),7),k=q(g),l=q(m),u=d("weekends");u||(n(k),n(l,-1,!0));c.title=f(k,h(q(l),-1),d("titleFormat"));c.start=g;c.end=m;c.visStart=k;c.visEnd=l;e(1,1,u?7:5,!1)};$a.call(c,a,b,"basicWeek");var d=c.opt,e=c.renderBasic,f=b.formatDates};la.basicDay=function(a,b){var c=this;c.render=function(a,b){b&&(h(a,b),d("weekends")||n(a,0>b?-1:1));c.title=f(a,d("titleFormat"));c.start=c.visStart=q(a,!0);c.end=c.visEnd=h(q(c.start),1);e(1,1,1,!1)};$a.call(c,a,b,"basicDay");var d=
c.opt,e=c.renderBasic,f=b.formatDate};d({weekMode:"fixed"});la.agendaWeek=function(a,b){var c=this;c.render=function(a,b){b&&h(a,7*b);var g=h(q(a),-((a.getDay()-d("firstDay")+7)%7)),m=h(q(g),7),k=q(g),l=q(m),u=d("weekends");u||(n(k),n(l,-1,!0));c.title=f(k,h(q(l),-1),d("titleFormat"));c.start=g;c.end=m;c.visStart=k;c.visEnd=l;e(u?7:5)};nb.call(c,a,b,"agendaWeek");var d=c.opt,e=c.renderAgenda,f=b.formatDates};la.agendaDay=function(a,b){var c=this;c.render=function(a,b){b&&(h(a,b),d("weekends")||n(a,
0>b?-1:1));var g=q(a,!0),m=h(q(g),1);c.title=f(a,d("titleFormat"));c.start=c.visStart=g;c.end=c.visEnd=m;e(1)};nb.call(c,a,b,"agendaDay");var d=c.opt,e=c.renderAgenda,f=b.formatDate};d({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);
(function(a){function b(a,b,c){var d=b;10>b&&(d="0"+b);if(c.isoTime)return b=a,10>b&&(b="0"+a),b+":"+d;b=a%12;0==b&&(b=12);return b+":"+d+(c.meridiemUpperCase?12>a?"AM":"PM":12>a?"am":"pm")}function d(a){if((a=a=/(\d+)\s*[:\-\.,]\s*(\d+)\s*(am|pm)?/i.exec(a))&&3<=a.length){var b=Number(a[1]),c=Number(a[2]);12==b&&a[3]&&(b-=12);a[3]&&"pm"==a[3].toLowerCase()&&(b+=12);return{hour:b,minute:c}}return null}function c(a){return a&&60*a.hour+a.minute}function e(e,g){for(var k=c(g.minTime),h=c(g.maxTime),
l=c(g.defaultTime),m=g.selection&&c(d(g.selection)),r=g.minutes,q=g.onehour,u=g.hours,m=m&&Math.floor((m-k)/g.timeInterval)*g.timeInterval+k,n,s=a("<ul></ul>"),D=k;D<=h;D+=g.timeInterval)(function(c){var d=b(Math.floor(c/60),c%60,g),e=d;if(g.showDuration)var f=c-k,e=60>f?e+(" ("+f+" "+r+")"):60==f?e+(" ("+q+")"):e+(" ("+Math.round(f/60*10)/10+" "+u+")");e=a("<li></li>").append(a('<a href="javascript:void(0);">'+e+"</a>").click(function(){g&&g.selectTime&&g.selectTime(d);return!1}).mousemove(function(){a("li.selected",
s).removeClass("selected")}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})).appendTo(s);n||c!=l||(n=e);m==c&&(e.addClass("selected").addClass("ui-state-highlight"),n=e)})(D);n&&setTimeout(function(){e[0].scrollTop=n[0].offsetTop-2*n.height()},0);e.empty().append(s)}a.fn.calendricalTime=function(b){b=b||{};b.timeInterval=b.timeInterval||30;b.padding=b.padding||4;return this.each(function(){var c=a(this),k,h=!1;c.bind("focus click",function(){if(!k){var l=
c.position();k=a("<div></div>").addClass("calendricalTimePopup ui-widget ui-widget-content").mouseenter(function(){h=!0}).mouseleave(function(){h=!1}).mousedown(function(a){a.preventDefault()}).css({position:"absolute",left:l.left,top:l.top+c.height()+2*b.padding});c.after(k);l={selection:c.val(),selectTime:function(a){h=!1;c.val(a);k.remove();k=null},isoTime:b.isoTime||!1,meridiemUpperCase:b.meridiemUpperCase||!1,defaultTime:b.defaultTime||{hour:8,minute:0},minTime:b.minTime||{hour:0,minute:0},maxTime:b.maxTime||
{hour:23,minute:59},timeInterval:b.timeInterval||30,minutes:b.minutes||"mins",onehour:b.onehour||"1 hr",hours:b.hours||"hrs"};if(b.startTime){var m=d(b.startTime.val());b.startDate&&b.endDate&&!areDatesEqual(parseDate(b.startDate.val()),parseDate(b.endDate.val()))&&(m=null);m&&(l.minTime=m,l.showDuration=!0,k.addClass("calendricalEndTimePopup"))}e(k,l)}}).blur(function(){h?k&&c.focus():k&&(k.remove(),k=null)})})};a.fn.calendricalTimeRange=function(b){2<=this.length&&(a(this[0]).calendricalTime(b),
a(this[1]).calendricalTime(a.extend({startTime:a(this[0])},b)));return this}})(jQuery);
(function(a){function b(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",ampm:!1,timeFormat:"hh:mm tt",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",timezoneText:"Time Zone"};this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showTimezone:!1,showTime:!0,stepHour:0.05,stepMinute:0.05,stepSecond:0.05,hour:0,minute:0,second:0,timezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,hourMax:23,
minuteMax:59,secondMax:59,minDateTime:null,maxDateTime:null,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,showTimepicker:!0,timezoneList:"-1100 -1000 -0900 -0800 -0700 -0600 -0500 -0400 -0300 -0200 -0100 +0000 +0100 +0200 +0300 +0400 +0500 +0600 +0700 +0800 +0900 +1000 +1100 +1200".split(" ")};a.extend(this._defaults,this.regional[""])}a.extend(a.ui,{timepicker:{version:"0.9.4"}});a.extend(b.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,
minute_slider:null,second_slider:null,timezone_select:null,hour:0,minute:0,second:0,timezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:"-1100 -1000 -0900 -0800 -0700 -0600 -0500 -0400 -0300 -0200 -0100 +0000 +0100 +0200 +0300 +0400 +0500 +0600 +0700 +0800 +0900 +1000 +1100 +1200".split(" "),setDefaults:function(b){var c=this._defaults;
b=b||{};a.extend(c,b);for(var e in b)if(null===b[e]||void 0===b[e])c[e]=b[e];return this},_newInst:function(d,c){var e=new b,f={},g;for(g in this._defaults){var k=d.attr("time:"+g);if(k)try{f[g]=eval(k)}catch(h){f[g]=k}}e._defaults=a.extend({},this._defaults,f,c,{beforeShow:function(b,d){a.isFunction(c.beforeShow)&&c.beforeShow(b,d,e)},onChangeMonthYear:function(b,f,h){e._updateDateTime(h);a.isFunction(c.onChangeMonthYear)&&c.onChangeMonthYear.call(d[0],b,f,h,e)},onClose:function(b,f){!0===e.timeDefined&&
""!=d.val()&&e._updateDateTime(f);a.isFunction(c.onClose)&&c.onClose.call(d[0],b,f,e)},timepicker:e});e.hour=e._defaults.hour;e.minute=e._defaults.minute;e.second=e._defaults.second;e.ampm="";e.$input=d;c.altField&&(e.$altInput=a(c.altField).css({cursor:"pointer"}).focus(function(){d.trigger("focus")}));void 0!==e._defaults.minDate&&e._defaults.minDate instanceof Date&&(e._defaults.minDateTime=new Date(e._defaults.minDate.getTime()));void 0!==e._defaults.minDateTime&&e._defaults.minDateTime instanceof
Date&&(e._defaults.minDate=new Date(e._defaults.minDateTime.getTime()));void 0!==e._defaults.maxDate&&e._defaults.maxDate instanceof Date&&(e._defaults.maxDateTime=new Date(e._defaults.maxDate.getTime()));void 0!==e._defaults.maxDateTime&&e._defaults.maxDateTime instanceof Date&&(e._defaults.maxDate=new Date(e._defaults.maxDateTime.getTime()));return e},_addTimePicker:function(a){var b=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=
this._parseTime(b);this._limitMinMaxDateTime(a,!1);this._injectTimePicker()},_parseTime:function(b,c){var e=this._defaults.timeFormat.toString().replace(/h{1,2}/ig,"(\\d?\\d)").replace(/m{1,2}/ig,"(\\d?\\d)").replace(/s{1,2}/ig,"(\\d?\\d)").replace(/t{1,2}/ig,"(am|pm|a|p)?").replace(/z{1}/ig,"((\\+|-)\\d\\d\\d\\d)?").replace(/\s/g,"\\s?")+"$",f=this._getFormatPositions();this.inst||(this.inst=a.datepicker._getInst(this.$input[0]));if(c||!this._defaults.timeOnly)e=".{"+a.datepicker._get(this.inst,
"dateFormat").length+",}"+this._defaults.separator.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")+e;return(e=b.match(RegExp(e,"i")))?(-1!==f.t&&(this.ampm=(void 0===e[f.t]||0===e[f.t].length?"":"A"==e[f.t].charAt(0).toUpperCase()?"AM":"PM").toUpperCase()),-1!==f.h&&(this.hour="AM"==this.ampm&&"12"==e[f.h]?0:"PM"==this.ampm&&"12"!=e[f.h]?(parseFloat(e[f.h])+12).toFixed(0):Number(e[f.h])),-1!==f.m&&(this.minute=Number(e[f.m])),-1!==f.s&&(this.second=Number(e[f.s])),-1!==f.z&&(this.timezone=e[f.z]),
!0):!1},_getFormatPositions:function(){var a=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2}|z)/g),b={h:-1,m:-1,s:-1,t:-1,z:-1};if(a)for(var e=0;e<a.length;e++)-1==b[a[e].toString().charAt(0)]&&(b[a[e].toString().charAt(0)]=e+1);return b},_injectTimePicker:function(){var b=this.inst.dpDiv,c=this._defaults,e=this,f=(c.hourMax-c.hourMax%c.stepHour).toFixed(0),g=(c.minuteMax-c.minuteMax%c.stepMinute).toFixed(0),k=(c.secondMax-c.secondMax%c.stepSecond).toFixed(0),h=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,
"");if(0===b.find("div#ui-timepicker-div-"+h).length&&c.showTimepicker){var l='<div class="ui-timepicker-div" id="ui-timepicker-div-'+h+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+h+'"'+(c.showTime?"":' style="display:none;"')+">"+c.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+h+'"'+(c.showTime?"":' style="display:none;"')+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+h+'"'+(c.showHour?"":' style="display:none;"')+">"+c.hourText+
"</dt>",m=0,r=0,q=0,u;if(c.showHour&&0<c.hourGrid){for(var l=l+('<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+h+'"'+(c.showHour?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>'),n=c.hourMin;n<f;n+=c.hourGrid){m++;var s=c.ampm&&12<n?n-12:n;10>s&&(s="0"+s);c.ampm&&(s=0==n?"12a":12>n?s+"a":s+"p");l+="<td>"+s+"</td>"}l+="</tr></table></div></dd>"}else l+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+h+'"'+(c.showHour?"":' style="display:none;"')+"></dd>";
l+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+h+'"'+(c.showMinute?"":' style="display:none;"')+">"+c.minuteText+"</dt>";if(c.showMinute&&0<c.minuteGrid){l+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+c.minuteGrid+'"><div id="ui_tpicker_minute_'+h+'"'+(c.showMinute?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(n=c.minuteMin;n<g;n+=c.minuteGrid)r++,l+="<td>"+(10>n?"0":"")+n+"</td>";l+="</tr></table></div></dd>"}else l+='<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+
h+'"'+(c.showMinute?"":' style="display:none;"')+"></dd>";l+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+h+'"'+(c.showSecond?"":' style="display:none;"')+">"+c.secondText+"</dt>";if(c.showSecond&&0<c.secondGrid){l+='<dd class="ui_tpicker_second ui_tpicker_second_'+c.secondGrid+'"><div id="ui_tpicker_second_'+h+'"'+(c.showSecond?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(n=c.secondMin;n<k;n+=c.secondGrid)q++,l+="<td>"+(10>n?"0":"")+n+
"</td>";l+="</tr></table></div></dd>"}else l+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+h+'"'+(c.showSecond?"":' style="display:none;"')+"></dd>";l+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+h+'"'+(c.showTimezone?"":' style="display:none;"')+">"+c.timezoneText+"</dt>";l+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+h+'"'+(c.showTimezone?"":' style="display:none;"')+"></dd>";$tp=a(l+"</dl></div>");!0===c.timeOnly&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+
c.timeOnlyTitle+"</div></div>"),b.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());this.hour_slider=$tp.find("#ui_tpicker_hour_"+h).slider({orientation:"horizontal",value:this.hour,min:c.hourMin,max:f,step:c.stepHour,slide:function(a,b){e.hour_slider.slider("option","value",b.value);e._onTimeChange()}});this.minute_slider=$tp.find("#ui_tpicker_minute_"+h).slider({orientation:"horizontal",value:this.minute,min:c.minuteMin,max:g,step:c.stepMinute,slide:function(a,b){e.minute_slider.slider("option",
"value",b.value);e._onTimeChange()}});this.second_slider=$tp.find("#ui_tpicker_second_"+h).slider({orientation:"horizontal",value:this.second,min:c.secondMin,max:k,step:c.stepSecond,slide:function(a,b){e.second_slider.slider("option","value",b.value);e._onTimeChange()}});this.timezone_select=$tp.find("#ui_tpicker_timezone_"+h).append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,a.map(c.timezoneList,function(b,c){return a("<option />").val("object"==typeof b?b.value:b).text("object"==
typeof b?b.label:b)}));this.timezone_select.val("undefined"!=typeof this.timezone&&null!=this.timezone&&""!=this.timezone?this.timezone:c.timezone);this.timezone_select.change(function(){e._onTimeChange()});c.showHour&&0<c.hourGrid&&(u=100*m*c.hourGrid/(f-c.hourMin),$tp.find(".ui_tpicker_hour table").css({width:u+"%",marginLeft:u/(-2*m)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){var b=a(this).html();if(c.ampm)var d=b.substring(2).toLowerCase(),b=parseInt(b.substring(0,
2)),b="a"==d?12==b?0:b:12==b?12:b+12;e.hour_slider.slider("option","value",b);e._onTimeChange();e._onSelectHandler()}).css({cursor:"pointer",width:100/m+"%",textAlign:"center",overflow:"hidden"})}));c.showMinute&&0<c.minuteGrid&&(u=100*r*c.minuteGrid/(g-c.minuteMin),$tp.find(".ui_tpicker_minute table").css({width:u+"%",marginLeft:u/(-2*r)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){e.minute_slider.slider("option","value",a(this).html());e._onTimeChange();e._onSelectHandler()}).css({cursor:"pointer",
width:100/r+"%",textAlign:"center",overflow:"hidden"})}));c.showSecond&&0<c.secondGrid&&$tp.find(".ui_tpicker_second table").css({width:u+"%",marginLeft:u/(-2*q)+"%",borderCollapse:"collapse"}).find("td").each(function(b){a(this).click(function(){e.second_slider.slider("option","value",a(this).html());e._onTimeChange();e._onSelectHandler()}).css({cursor:"pointer",width:100/q+"%",textAlign:"center",overflow:"hidden"})});f=b.find(".ui-datepicker-buttonpane");f.length?f.before($tp):b.append($tp);this.$timeObj=
$tp.find("#ui_tpicker_time_"+h);null!==this.inst&&(b=this.timeDefined,this._onTimeChange(),this.timeDefined=b);b=function(){e._onSelectHandler()};this.hour_slider.bind("slidestop",b);this.minute_slider.bind("slidestop",b);this.second_slider.bind("slidestop",b)}},_limitMinMaxDateTime:function(a,b){var e=this._defaults,f=new Date(a.selectedYear,a.selectedMonth,a.selectedDay);if(this._defaults.showTimepicker){if(null!==this._defaults.minDateTime&&f){var g=this._defaults.minDateTime,k=new Date(g.getFullYear(),
g.getMonth(),g.getDate(),0,0,0,0);if(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal)this.hourMinOriginal=e.hourMin,this.minuteMinOriginal=e.minuteMin,this.secondMinOriginal=e.secondMin;a.settings.timeOnly||k.getTime()==f.getTime()?(this._defaults.hourMin=g.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=g.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=
g.getSeconds()):(this.second<this._defaults.secondMin&&(this.second=this._defaults.secondMin),this._defaults.secondMin=this.secondMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal)}if(null!==this._defaults.maxDateTime&&f){g=this._defaults.maxDateTime;k=new Date(g.getFullYear(),g.getMonth(),g.getDate(),
0,0,0,0);if(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal)this.hourMaxOriginal=e.hourMax,this.minuteMaxOriginal=e.minuteMax,this.secondMaxOriginal=e.secondMax;a.settings.timeOnly||k.getTime()==f.getTime()?(this._defaults.hourMax=g.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=g.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMin=g.getSeconds()):
(this.second>this._defaults.secondMax&&(this.second=this._defaults.secondMax),this._defaults.secondMax=this.secondMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal)}void 0!==b&&!0===b&&(this.hour_slider.slider("option",{min:this._defaults.hourMin,max:this._defaults.hourMax}).slider("value",this.hour),
this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:this._defaults.minuteMax}).slider("value",this.minute),this.second_slider.slider("option",{min:this._defaults.secondMin,max:this._defaults.secondMax}).slider("value",this.second))}},_onTimeChange:function(){var a=this.hour_slider?this.hour_slider.slider("value"):!1,b=this.minute_slider?this.minute_slider.slider("value"):!1,e=this.second_slider?this.second_slider.slider("value"):!1,f=this.timezone_select?this.timezone_select.val():
!1;!1!==a&&(a=parseInt(a,10));!1!==b&&(b=parseInt(b,10));!1!==e&&(e=parseInt(e,10));var g=12>a?"AM":"PM",k=a!=this.hour||b!=this.minute||e!=this.second||0<this.ampm.length&&this.ampm!=g||f!=this.timezone;k&&(!1!==a&&(this.hour=a),!1!==b&&(this.minute=b),!1!==e&&(this.second=e),!1!==f&&(this.timezone=f),this._limitMinMaxDateTime(this.inst,!0));this._defaults.ampm&&(this.ampm=g);this._formatTime();this.$timeObj&&this.$timeObj.text(this.formattedTime);this.timeDefined=!0;k&&this._updateDateTime()},_onSelectHandler:function(){var a=
this._defaults.onSelect,b=this.$input?this.$input[0]:null;a&&b&&a.apply(b,[this.formattedDateTime,this])},_formatTime:function(b,c,e){void 0==e&&(e=this._defaults.ampm);b=b||{hour:this.hour,minute:this.minute,second:this.second,ampm:this.ampm,timezone:this.timezone};var f=c||this._defaults.timeFormat.toString();if(e)var g="AM"==b.ampm?b.hour:b.hour%12,g=0===Number(g)?12:g,f=f.toString().replace(/hh/g,(10>g?"0":"")+g).replace(/h/g,g).replace(/mm/g,(10>b.minute?"0":"")+b.minute).replace(/m/g,b.minute).replace(/ss/g,
(10>b.second?"0":"")+b.second).replace(/s/g,b.second).replace(/TT/g,b.ampm.toUpperCase()).replace(/tt/g,b.ampm.toLowerCase()).replace(/T/g,b.ampm.charAt(0).toUpperCase()).replace(/t/g,b.ampm.charAt(0).toLowerCase()).replace(/z/g,b.timezone);else f=f.toString().replace(/hh/g,(10>b.hour?"0":"")+b.hour).replace(/h/g,b.hour).replace(/mm/g,(10>b.minute?"0":"")+b.minute).replace(/m/g,b.minute).replace(/ss/g,(10>b.second?"0":"")+b.second).replace(/s/g,b.second).replace(/z/g,b.timezone),f=a.trim(f.replace(/t/gi,
""));if(arguments.length)return f;this.formattedTime=f},_updateDateTime:function(b){b=this.inst||b;dt=new Date(b.selectedYear,b.selectedMonth,b.selectedDay);dateFmt=a.datepicker._get(b,"dateFormat");formatCfg=a.datepicker._getFormatConfig(b);timeAvailable=null!==dt&&this.timeDefined;var c=this.formattedDate=a.datepicker.formatDate(dateFmt,null===dt?new Date:dt,formatCfg);void 0!==b.lastVal&&0<b.lastVal.length&&0===this.$input.val().length||(!0===this._defaults.timeOnly?c=this.formattedTime:!0!==this._defaults.timeOnly&&
(this._defaults.alwaysSetTime||timeAvailable)&&(c+=this._defaults.separator+this.formattedTime),this.formattedDateTime=c,this._defaults.showTimepicker?this.$altInput&&!0===this._defaults.altFieldTimeOnly?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):(this.$altInput&&this.$altInput.val(c),this.$input.val(c)):this.$input.val(this.formattedDate),this.$input.trigger("change"))}});a.fn.extend({timepicker:function(b){b=b||{};var c=arguments;"object"==typeof b&&(c[0]=a.extend(b,
{timeOnly:!0}));return a(this).each(function(){a.fn.datetimepicker.apply(a(this),c)})},datetimepicker:function(b){b=b||{};var c=arguments;return"string"==typeof b?"getDate"==b?a.fn.datepicker.apply(a(this[0]),c):this.each(function(){var b=a(this);b.datepicker.apply(b,c)}):this.each(function(){var c=a(this);c.datepicker(a.timepicker._newInst(c,b)._defaults)})}});a.datepicker._base_selectDate=a.datepicker._selectDate;a.datepicker._selectDate=function(b,c){var e=this._getInst(a(b)[0]),f=this._get(e,
"timepicker");f?(f._limitMinMaxDateTime(e,!0),e.inline=e.stay_open=!0,this._base_selectDate(b,c+f._defaults.separator+f.formattedTime),e.inline=e.stay_open=!1,this._notifyChange(e),this._updateDatepicker(e)):this._base_selectDate(b,c)};a.datepicker._base_updateDatepicker=a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(a){if("boolean"!==typeof a.stay_open||!1===a.stay_open){this._base_updateDatepicker(a);var b=this._get(a,"timepicker");b&&b._addTimePicker(a)}};a.datepicker._base_doKeyPress=
a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(b){var c=a.datepicker._getInst(b.target),e=a.datepicker._get(c,"timepicker");if(e&&a.datepicker._get(c,"constrainInput")){var f=e._defaults.ampm,c=e._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,f?"APM":"").replace(/T/g,f?"AP":"").replace(/tt/g,f?"apm":"").replace(/t/g,f?"ap":"")+" "+e._defaults.separator+a.datepicker._possibleChars(a.datepicker._get(c,"dateFormat")),e=String.fromCharCode(void 0===b.charCode?b.keyCode:
b.charCode);return b.ctrlKey||" ">e||!c||-1<c.indexOf(e)}return a.datepicker._base_doKeyPress(b)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;a.datepicker._doKeyUp=function(b){var c=a.datepicker._getInst(b.target),e=a.datepicker._get(c,"timepicker");if(e&&e._defaults.timeOnly&&c.input.val()!=c.lastVal)try{a.datepicker._updateDatepicker(c)}catch(f){a.datepicker.log(f)}return a.datepicker._base_doKeyUp(b)};a.datepicker._base_gotoToday=a.datepicker._gotoToday;a.datepicker._gotoToday=function(b){this._base_gotoToday(b);
this._setTime(this._getInst(a(b)[0]),new Date)};a.datepicker._disableTimepickerDatepicker=function(b,c,e){c=this._getInst(b);e=this._get(c,"timepicker");a(b).datepicker("getDate");e&&(e._defaults.showTimepicker=!1,e._updateDateTime(c))};a.datepicker._enableTimepickerDatepicker=function(b,c,e){c=this._getInst(b);e=this._get(c,"timepicker");a(b).datepicker("getDate");e&&(e._defaults.showTimepicker=!0,e._addTimePicker(c),e._updateDateTime(c))};a.datepicker._setTime=function(a,b){var e=this._get(a,"timepicker");
if(e){var f=e._defaults,g=b?b.getHours():f.hour,k=b?b.getMinutes():f.minute,h=b?b.getSeconds():f.second;if(g<f.hourMin||g>f.hourMax||k<f.minuteMin||k>f.minuteMax||h<f.secondMin||h>f.secondMax)g=f.hourMin,k=f.minuteMin,h=f.secondMin;e.hour_slider?e.hour_slider.slider("value",g):e.hour=g;e.minute_slider?e.minute_slider.slider("value",k):e.minute=k;e.second_slider?e.second_slider.slider("value",h):e.second=h;e._onTimeChange();e._updateDateTime(a)}};a.datepicker._setTimeDatepicker=function(a,b,e){a=this._getInst(a);
var f=this._get(a,"timepicker");f&&(this._setDateFromField(a),b&&("string"==typeof b?(f._parseTime(b,e),b=new Date,b.setHours(f.hour,f.minute,f.second)):b=new Date(b.getTime()),"Invalid Date"==b.toString()&&(b=void 0),this._setTime(a,b)))};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(a,b){var e=this._getInst(a),f=b instanceof Date?new Date(b.getTime()):b;this._updateDatepicker(e);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(a,
f,!0)};a.datepicker._base_getDateDatepicker=a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(b,c){var e=this._getInst(b),f=this._get(e,"timepicker");return f?(this._setDateFromField(e,c),(e=this._getDate(e))&&f._parseTime(a(b).val(),!0)&&e.setHours(f.hour,f.minute,f.second),e):this._base_getDateDatepicker(b,c)};a.timepicker=new b;a.timepicker.version="0.9.4"})(jQuery);
(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var b=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).attr("title")},position:{my:"left center",at:"right center",offset:"15 0"}},_init:function(){var d=this;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+b++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();
this.tooltipContent=a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.bind("focus.tooltip mouseenter.tooltip",function(a){d.open(a)}).bind("blur.tooltip mouseleave.tooltip",function(a){d.close(a)})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.tooltip},open:function(a){var b=
this.element;if(!this.current||this.current[0]!=b[0]){var e=this;this.current=b;this.currentTitle=b.attr("title");var f=this.options.content.call(b[0],function(f){e.current==b&&e._show(a,b,f)});f&&e._show(a,b,f)}},_show:function(b,c,e){e&&(c.attr("title",""),this.options.disabled||(this.tooltipContent.html(e),this.tooltip.css({top:0,left:0}).show().position(a.extend(this.options.position,{of:c})).hide(),this.tooltip.attr("aria-hidden","false"),c.attr("aria-describedby",this.tooltip.attr("id")),this.tooltip.is(":animated")?
this.tooltip.stop().show().fadeTo("normal",this.opacity):this.tooltip.is(":visible")?this.tooltip.fadeTo("normal",this.opacity):this.tooltip.fadeIn(),this._trigger("open",b)))},close:function(b){this.current&&(this.current.attr("title",this.currentTitle),this.options.disabled||(this.current.removeAttr("aria-describedby"),this.current=null,this.tooltip.attr("aria-hidden","true"),this.tooltip.is(":animated")?this.tooltip.stop().fadeTo("normal",0,function(){a(this).hide().css("opacity","")}):this.tooltip.stop().fadeOut(),
this._trigger("close",b)))}})})(jQuery);
(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{guid:1,uidPref:"jqg",randId:function(b){return(b?b:a.jgrid.uidPref)+a.jgrid.guid++}});a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove()},hideModal:function(b,d){d=a.extend({jqm:!0,gb:""},d||{});if(d.onClose){var c=d.onClose(b);if("boolean"==typeof c&&!c)return}if(a.fn.jqm&&!0===d.jqm)a(b).attr("aria-hidden","true").jqmHide();else{if(""!==d.gb)try{a(".jqgrid-overlay:first",
d.gb).hide()}catch(e){}a(b).hide().attr("aria-hidden","true")}},findPos:function(a){var d=0,c=0;if(a.offsetParent){do d+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return[d,c]},createModal:function(b,d,c,e,f,g,k){var h=document.createElement("div"),l,m=this;k=a.extend({},k||{});l="rtl"==a(c.gbox).attr("dir")?!0:!1;h.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";h.id=b.themodal;var r=document.createElement("div");r.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";
r.id=b.modalhead;a(r).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>");var q=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){q.addClass("ui-state-hover")},function(){q.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(r).append(q);l?(h.dir="rtl",a(".ui-jqdialog-title",r).css("float","right"),a(".ui-jqdialog-titlebar-close",r).css("left","0.3em")):(h.dir="ltr",a(".ui-jqdialog-title",r).css("float",
"left"),a(".ui-jqdialog-titlebar-close",r).css("right","0.3em"));var u=document.createElement("div");a(u).addClass("ui-jqdialog-content ui-widget-content").attr("id",b.modalcontent);a(u).append(d);h.appendChild(u);a(h).prepend(r);!0===g?a("body").append(h):"string"==typeof g?a(g).append(h):a(h).insertBefore(e);a(h).css(k);"undefined"===typeof c.jqModal&&(c.jqModal=!0);d={};if(a.fn.jqm&&!0===c.jqModal)0===c.left&&0===c.top&&c.overlay&&(k=[],k=this.findPos(f),c.left=k[0]+4,c.top=k[1]+4),d.top=c.top+
"px",d.left=c.left;else if(0!==c.left||0!==c.top)d.left=c.left,d.top=c.top+"px";a("a.ui-jqdialog-titlebar-close",r).click(function(e){e=a("#"+b.themodal).data("onClose")||c.onClose;var d=a("#"+b.themodal).data("gbox")||c.gbox;m.hideModal("#"+b.themodal,{gb:d,jqm:c.jqModal,onClose:e});return!1});0!==c.width&&c.width||(c.width=300);0!==c.height&&c.height||(c.height=200);c.zIndex||(e=a(e).parents("*[role=dialog]").filter(":first").css("z-index"),c.zIndex=e?parseInt(e,10)+1:950);e=0;l&&d.left&&!g&&(e=
a(c.gbox).width()-(isNaN(c.width)?0:parseInt(c.width,10))-8,d.left=parseInt(d.left,10)+parseInt(e,10));d.left&&(d.left+="px");a(h).css(a.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex,overflow:"hidden"},d)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":b.modalhead,"aria-hidden":"true"});"undefined"==typeof c.drag&&(c.drag=!0);"undefined"==typeof c.resize&&(c.resize=!0);if(c.drag)if(a(r).css("cursor","move"),a.fn.jqDrag)a(h).jqDrag(r);
else try{a(h).draggable({handle:a("#"+r.id)})}catch(n){}if(c.resize)if(a.fn.jqResize)a(h).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),a("#"+b.themodal).jqResize(".jqResize",b.scrollelm?"#"+b.scrollelm:!1);else try{a(h).resizable({handles:"se, sw",alsoResize:b.scrollelm?"#"+b.scrollelm:!1})}catch(s){}!0===c.closeOnEscape&&a(h).keydown(function(e){27==e.which&&(e=a("#"+b.themodal).data("onClose")||c.onClose,
m.hideModal(this,{gb:c.gbox,jqm:c.jqModal,onClose:e}))})},viewModal:function(b,d){d=a.extend({toTop:!0,overlay:10,modal:!1,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:!0,jqM:!0},d||{});if(a.fn.jqm&&!0===d.jqm)d.jqM?a(b).attr("aria-hidden","false").jqm(d).jqmShow():a(b).attr("aria-hidden","false").jqmShow();else{""!==d.gbox&&(a(".jqgrid-overlay:first",d.gbox).show(),a(b).data("gbox",d.gbox));a(b).show().attr("aria-hidden","false");try{a(":input:visible",b)[0].focus()}catch(c){}}},info_dialog:function(b,
d,c,e){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+b+"</b>",left:250,top:170,zIndex:1E3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(f,e||{});var g=f.jqModal,k=this;a.fn.jqm&&!g&&(g=!1);b="";if(0<f.buttons.length)for(e=0;e<f.buttons.length;e++)"undefined"==typeof f.buttons[e].id&&(f.buttons[e].id="info_button_"+e),b+="<a href='javascript:void(0)' id='"+f.buttons[e].id+"' class='fm-button ui-state-default ui-corner-all'>"+
f.buttons[e].text+"</a>";e=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px";d="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+e+";"+("text-align:"+f.align+";")+"'>"+d+"</div>");d+=c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+
c+"</a>"+b+"</div>":""!==b?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+b+"</div>":"";d+="</div>";try{"false"==a("#info_dialog").attr("aria-hidden")&&this.hideModal("#info_dialog",{jqm:g}),a("#info_dialog").remove()}catch(h){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},d,f,"","",!0);b&&a.each(f.buttons,
function(b){a("#"+this.id,"#info_id").bind("click",function(){f.buttons[b].onClick.call(a("#info_dialog"));return!1})});a("#closedialog","#info_id").click(function(a){k.hideModal("#info_dialog",{jqm:g});return!1});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(f.beforeOpen)&&f.beforeOpen();this.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove();a.o&&a.o.remove()},modal:f.modal,jqm:g});
a.isFunction(f.afterOpen)&&f.afterOpen();try{a("#info_dialog").focus()}catch(l){}},createEl:function(b,d,c,e,f){function g(b,c){a.isFunction(c.dataInit)&&c.dataInit(b);c.dataEvents&&a.each(c.dataEvents,function(){void 0!==this.data?a(b).bind(this.type,this.data,this.fn):a(b).bind(this.type,this.fn)});return c}function k(b,c,e){var d="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr".split(" ");"undefined"!=typeof e&&a.isArray(e)&&(d=a.extend(d,e));a.each(c,function(c,e){-1===
a.inArray(c,d)&&a(b).attr(c,e)});c.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var h="";switch(b){case "textarea":h=document.createElement("textarea");e?d.cols||a(h).css({width:"98%"}):d.cols||(d.cols=20);d.rows||(d.rows=2);if("&nbsp;"==c||"&#160;"==c||1==c.length&&160==c.charCodeAt(0))c="";h.value=c;k(h,d);d=g(h,d);a(h).attr({role:"textbox",multiline:"true"});break;case "checkbox":h=document.createElement("input");h.type="checkbox";d.value?(b=d.value.split(":"),c===b[0]&&(h.checked=!0,
h.defaultChecked=!0),h.value=b[0],a(h).attr("offval",b[1])):(b=c.toLowerCase(),0>b.search(/(false|0|no|off|undefined)/i)&&""!==b?(h.checked=!0,h.defaultChecked=!0,h.value=c):h.value="on",a(h).attr("offval","off"));k(h,d,["value"]);d=g(h,d);a(h).attr("role","checkbox");break;case "select":h=document.createElement("select");h.setAttribute("role","select");e=[];!0===d.multiple?(b=!0,h.multiple="multiple",a(h).attr("aria-multiselectable","true")):b=!1;if("undefined"!=typeof d.dataUrl)a.ajax(a.extend({url:d.dataUrl,
type:"GET",dataType:"html",context:{elem:h,options:d,vl:c},success:function(b,c){var e,d=[],f=this.elem,h=this.vl,m=a.extend({},this.options),l=!0===m.multiple;"undefined"!=typeof m.buildSelect?(e=m.buildSelect(b),e=a(e).html()):e=a(b).html();e&&(a(f).append(e),k(f,m),m=g(f,m),"undefined"===typeof m.size&&(m.size=l?3:1),l?(d=h.split(","),d=a.map(d,function(b){return a.trim(b)})):d[0]=a.trim(h),setTimeout(function(){a("option",f).each(function(b){a(this).attr("role","option");if(-1<a.inArray(a.trim(a(this).text()),
d)||-1<a.inArray(a.trim(a(this).val()),d))this.selected="selected"})},0))}},f||{}));else if(d.value){var l;b?(e=c.split(","),e=a.map(e,function(b){return a.trim(b)}),"undefined"===typeof d.size&&(d.size=3)):d.size=1;"function"===typeof d.value&&(d.value=d.value());var m,r;if("string"===typeof d.value)for(m=d.value.split(";"),l=0;l<m.length;l++)r=m[l].split(":"),2<r.length&&(r[1]=a.map(r,function(a,b){if(0<b)return a}).join(":")),f=document.createElement("option"),f.setAttribute("role","option"),f.value=
r[0],f.innerHTML=r[1],b||a.trim(r[0])!=a.trim(c)&&a.trim(r[1])!=a.trim(c)||(f.selected="selected"),b&&(-1<a.inArray(a.trim(r[1]),e)||-1<a.inArray(a.trim(r[0]),e))&&(f.selected="selected"),h.appendChild(f);else if("object"===typeof d.value)for(l in m=d.value,m)m.hasOwnProperty(l)&&(f=document.createElement("option"),f.setAttribute("role","option"),f.value=l,f.innerHTML=m[l],b||a.trim(l)!=a.trim(c)&&a.trim(m[l])!=a.trim(c)||(f.selected="selected"),b&&(-1<a.inArray(a.trim(m[l]),e)||-1<a.inArray(a.trim(l),
e))&&(f.selected="selected"),h.appendChild(f));k(h,d,["value"]);d=g(h,d)}break;case "text":case "password":case "button":l="button"==b?"button":"textbox";h=document.createElement("input");h.type=b;h.value=c;k(h,d);d=g(h,d);"button"!=b&&(e?d.size||a(h).css({width:"98%"}):d.size||(d.size=20));a(h).attr("role",l);break;case "image":case "file":h=document.createElement("input");h.type=b;k(h,d);d=g(h,d);break;case "custom":h=document.createElement("span");try{if(a.isFunction(d.custom_element))if(m=d.custom_element.call(this,
c,d))m=a(m).addClass("customelement").attr({id:d.id,name:d.name}),a(h).empty().append(m);else throw"e2";else throw"e1";}catch(q){"e1"==q&&this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"==q?this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):this.info_dialog(a.jgrid.errors.errcap,"string"===typeof q?q:q.message,a.jgrid.edit.bClose)}}return h},checkDate:function(a,d){var c=
function(a){return 0!==a%4||0===a%100&&0!==a%400?28:29},e={},f;a=a.toLowerCase();f=-1!=a.indexOf("/")?"/":-1!=a.indexOf("-")?"-":-1!=a.indexOf(".")?".":"/";a=a.split(f);d=d.split(f);if(3!=d.length)return!1;f=-1;for(var g,k=-1,h=-1,l=0;l<a.length;l++)g=isNaN(d[l])?0:parseInt(d[l],10),e[a[l]]=g,g=a[l],-1!=g.indexOf("y")&&(f=l),-1!=g.indexOf("m")&&(h=l),-1!=g.indexOf("d")&&(k=l);g="y"==a[f]||"yyyy"==a[f]?4:"yy"==a[f]?2:-1;var l=function(a){for(var b=1;b<=a;b++){this[b]=31;if(4==b||6==b||9==b||11==b)this[b]=
30;2==b&&(this[b]=29)}return this}(12),m;if(-1===f)return!1;m=e[a[f]].toString();2==g&&1==m.length&&(g=1);if(m.length!=g||0===e[a[f]]&&"00"!=d[f]||-1===h)return!1;m=e[a[h]].toString();if(1>m.length||1>e[a[h]]||12<e[a[h]]||-1===k)return!1;m=e[a[k]].toString();return 1>m.length||1>e[a[k]]||31<e[a[k]]||2==e[a[h]]&&e[a[k]]>c(e[a[f]])||e[a[k]]>l[e[a[h]]]?!1:!0},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(a){var d=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!this.isEmpty(a))if(a=
a.match(d)){if(a[3]){if(1>a[1]||12<a[1])return!1}else if(23<a[1])return!1;if(59<a[2])return!1}else return!1;return!0},checkValues:function(b,d,c,e,f){var g,k;if("undefined"===typeof e)if("string"==typeof d)for(e=0,f=c.p.colModel.length;e<f;e++){if(c.p.colModel[e].name==d){g=c.p.colModel[e].editrules;d=e;try{k=c.p.colModel[e].formoptions.label}catch(h){}break}}else 0<=d&&(g=c.p.colModel[d].editrules);else g=e,k=void 0===f?"_":f;if(g){k||(k=c.p.colNames[d]);if(!0===g.required&&this.isEmpty(b))return[!1,
k+": "+a.jgrid.edit.msg.required,""];e=!1===g.required?!1:!0;if(!0===g.number&&(!1!==e||!this.isEmpty(b))&&isNaN(b))return[!1,k+": "+a.jgrid.edit.msg.number,""];if("undefined"!=typeof g.minValue&&!isNaN(g.minValue)&&parseFloat(b)<parseFloat(g.minValue))return[!1,k+": "+a.jgrid.edit.msg.minValue+" "+g.minValue,""];if("undefined"!=typeof g.maxValue&&!isNaN(g.maxValue)&&parseFloat(b)>parseFloat(g.maxValue))return[!1,k+": "+a.jgrid.edit.msg.maxValue+" "+g.maxValue,""];if(!(!0!==g.email||!1===e&&this.isEmpty(b)||
(f=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
f.test(b))))return[!1,k+": "+a.jgrid.edit.msg.email,""];if(!(!0!==g.integer||!1===e&&this.isEmpty(b)||!isNaN(b)&&0===b%1&&-1==b.indexOf(".")))return[!1,k+": "+a.jgrid.edit.msg.integer,""];if(!(!0!==g.date||!1===e&&this.isEmpty(b)||(d=c.p.colModel[d].formatoptions&&c.p.colModel[d].formatoptions.newformat?c.p.colModel[d].formatoptions.newformat:c.p.colModel[d].datefmt||"Y-m-d",this.checkDate(d,b))))return[!1,k+": "+a.jgrid.edit.msg.date+" - "+d,""];if(!0===g.time&&!(!1===e&&this.isEmpty(b)||this.checkTime(b)))return[!1,
k+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!(!0!==g.url||!1===e&&this.isEmpty(b)||(f=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,f.test(b))))return[!1,k+": "+a.jgrid.edit.msg.url,""];if(!0===g.custom&&(!1!==e||!this.isEmpty(b)))return a.isFunction(g.custom_func)?(b=g.custom_func.call(c,b,k),a.isArray(b)?b:[!1,a.jgrid.edit.msg.customarray,""]):[!1,a.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})})(jQuery);
(function(a){a.fn.jqFilter=function(b){if("string"===typeof b){var d=a.fn.jqFilter[b];if(!d)throw"jqFilter - No such method: "+b;var c=a.makeArray(arguments).slice(1);return d.apply(this,c)}var e=a.extend(!0,{filter:null,columns:[],onChange:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",
operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",
description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),_gridsopt:[],groupOps:["AND","OR"],groupButton:!0},b||{});return this.each(function(){if(!this.filter){this.p=e;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0],rules:[],groups:[]};var b,
c=this.p.columns.length,d,h=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(b=0;b<this.p._gridsopt.length;b++)this.p.ops[b].description=this.p._gridsopt[b];this.p.initFilter=a.extend(!0,{},this.p.filter);if(c){for(b=0;b<c;b++)d=this.p.columns[b],d.stype?d.inputtype=d.stype:d.inputtype||(d.inputtype="text"),d.sorttype?d.searchtype=d.sorttype:d.searchtype||(d.searchtype="string"),void 0===d.hidden&&(d.hidden=!1),d.label||(d.label=d.name),d.index&&(d.name=d.index),d.hasOwnProperty("searchoptions")||
(d.searchoptions={}),d.hasOwnProperty("searchrules")||(d.searchrules={});this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;'><tbody><tr><td class='query'></td></tr></tbody></table>");var l=function(b,c){var d=[!0,""];if(a.isFunction(c.searchrules))d=c.searchrules(b,c);else if(a.jgrid&&a.jgrid.checkValues)try{d=a.jgrid.checkValues(b,-1,null,c.searchrules,c.label)}catch(f){}d&&d.length&&!1===d[0]&&(e.error=!d[0],
e.errmsg=d[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(e.filter,null);a(this).append(b)};this.createTableForGroup=function(b,c){var d=this,f,h=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>");null===c&&a(h).append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='left'></th></tr>");
var g=a("<tr></tr>");a(h).append(g);var k=a("<th colspan='5' align='left'></th>");g.append(k);var l=a("<select class='opsel'></select>");k.append(l);var g="",B;for(f=0;f<e.groupOps.length;f++)B=b.groupOp===d.p.groupOps[f]?" selected='selected'":"",g+="<option value='"+d.p.groupOps[f]+"'"+B+">"+d.p.groupOps[f]+"</option>";l.append(g).bind("change",function(){b.groupOp=a(l).val();d.onchange()});g="<span></span>";this.p.groupButton&&(g=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),
g.bind("click",function(){void 0===b.groups&&(b.groups=[]);b.groups.push({groupOp:e.groupOps[0],rules:[],groups:[]});d.reDraw();d.onchange();return!1}));k.append(g);var g=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),A;g.bind("click",function(){void 0===b.rules&&(b.rules=[]);for(f=0;f<d.p.columns.length;f++){var a="undefined"===typeof d.p.columns[f].search?!0:d.p.columns[f].search,c=!0===d.p.columns[f].hidden;if(!0===d.p.columns[f].searchoptions.searchhidden&&a||a&&
!c){A=d.p.columns[f];break}}b.rules.push({field:A.name,op:(A.searchoptions.sopt?A.searchoptions.sopt:d.p.sopt?d.p.sopt:"string"===A.searchtype?d.p.stropts:d.p.numopts)[0],data:""});d.reDraw();return!1});k.append(g);null!==c&&(g=a("<input type='button' value='-' title='Delete group' class='delete-group'/>"),k.append(g),g.bind("click",function(){for(f=0;f<c.groups.length;f++)if(c.groups[f]===b){c.groups.splice(f,1);break}d.reDraw();d.onchange();return!1}));if(void 0!==b.groups)for(f=0;f<b.groups.length;f++)k=
a("<tr></tr>"),h.append(k),g=a("<td class='first'></td>"),k.append(g),g=a("<td colspan='4'></td>"),g.append(this.createTableForGroup(b.groups[f],b)),k.append(g);void 0===b.groupOp&&(b.groupOp=d.p.groupOps[0]);if(void 0!==b.rules)for(f=0;f<b.rules.length;f++)h.append(this.createTableRowForRule(b.rules[f],b));return h};this.createTableRowForRule=function(b,c){var d=this,f=a("<tr></tr>"),g,k,l,w,B="",A;f.append("<td class='first'></td>");var H=a("<td class='columns'></td>");f.append(H);var T=a("<select></select>"),
S,aa=[];H.append(T);T.bind("change",function(){b.field=a(T).val();l=a(this).parents("tr:first");for(g=0;g<d.p.columns.length;g++)if(d.p.columns[g].name===b.field){w=d.p.columns[g];break}if(w){w.searchoptions.id=a.jgrid.randId();h&&"text"===w.inputtype&&!w.searchoptions.size&&(w.searchoptions.size=10);var c=a.jgrid.createEl(w.inputtype,w.searchoptions,"",!0,d.p.ajaxSelectOptions,!0);a(c).addClass("input-elm");k=w.searchoptions.sopt?w.searchoptions.sopt:d.p.sopt?d.p.sopt:"string"===w.searchtype?d.p.stropts:
d.p.numopts;var e="",f="";aa=[];a.each(d.p.ops,function(){aa.push(this.name)});for(g=0;g<k.length;g++)S=a.inArray(k[g],aa),-1!==S&&(f="",0===g&&(b.op=d.p.ops[S].name,f=" selected='selected'"),e+="<option value='"+d.p.ops[S].name+"'"+f+">"+d.p.ops[S].description+"</option>");a(".selectopts",l).empty().append(e);a(".data",l).empty().append(c);a(".input-elm",l).bind("change",function(){b.data=a(this).val();d.onchange()});setTimeout(function(){b.data=a(c).val();d.onchange()},0)}});for(g=H=0;g<d.p.columns.length;g++){A=
"undefined"===typeof d.p.columns[g].search?!0:d.p.columns[g].search;var Ea=!0===d.p.columns[g].hidden;if(!0===d.p.columns[g].searchoptions.searchhidden&&A||A&&!Ea)A="",b.field===d.p.columns[g].name&&(A=" selected='selected'",H=g),B+="<option value='"+d.p.columns[g].name+"'"+A+">"+d.p.columns[g].label+"</option>"}T.append(B);B=a("<td class='operators'></td>");f.append(B);w=e.columns[H];w.searchoptions.id=a.jgrid.randId();h&&"text"===w.inputtype&&!w.searchoptions.size&&(w.searchoptions.size=10);var H=
a.jgrid.createEl(w.inputtype,w.searchoptions,b.data,!0,d.p.ajaxSelectOptions,!0),ba=a("<select class='selectopts'></select>");B.append(ba);ba.bind("change",function(){b.op=a(ba).val();l=a(this).parents("tr:first");var c=a(".input-elm",l)[0];"nu"===b.op||"nn"===b.op?(b.data="",c.value="",c.setAttribute("readonly","true"),c.setAttribute("disabled","true")):(c.removeAttribute("readonly"),c.removeAttribute("disabled"));d.onchange()});k=w.searchoptions.sopt?w.searchoptions.sopt:d.p.sopt?d.p.sopt:"string"===
w.searchtype?e.stropts:d.p.numopts;B="";a.each(d.p.ops,function(){aa.push(this.name)});for(g=0;g<k.length;g++)S=a.inArray(k[g],aa),-1!==S&&(A=b.op===d.p.ops[S].name?" selected='selected'":"",B+="<option value='"+d.p.ops[S].name+"'"+A+">"+d.p.ops[S].description+"</option>");ba.append(B);B=a("<td class='data'></td>");f.append(B);B.append(H);a(H).addClass("input-elm").bind("change",function(){b.data=a(this).val();d.onchange()});B=a("<td></td>");f.append(B);H=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");
B.append(H);H.bind("click",function(){for(g=0;g<c.rules.length;g++)if(c.rules[g]===b){c.rules.splice(g,1);break}d.reDraw();d.onchange();return!1});return f};this.getStringForGroup=function(a){var b="(",c;if(void 0!==a.groups)for(c=0;c<a.groups.length;c++){1<b.length&&(b+=" "+a.groupOp+" ");try{b+=this.getStringForGroup(a.groups[c])}catch(d){alert(d)}}if(void 0!==a.rules)try{for(c=0;c<a.rules.length;c++)1<b.length&&(b+=" "+a.groupOp+" "),b+=this.getStringForRule(a.rules[c])}catch(e){alert(e)}b+=")";
return"()"===b?"":b};this.getStringForRule=function(b){var c="",d="",f,g;for(f=0;f<this.p.ops.length;f++)if(this.p.ops[f].name===b.op){c=this.p.ops[f].operator;d=this.p.ops[f].name;break}for(f=0;f<this.p.columns.length;f++)if(this.p.columns[f].name===b.field){g=this.p.columns[f];break}f=b.data;if("bw"===d||"bn"===d)f+="%";if("ew"===d||"en"===d)f="%"+f;if("cn"===d||"nc"===d)f="%"+f+"%";if("in"===d||"ni"===d)f=" ("+f+")";e.errorcheck&&l(b.data,g);return-1!==a.inArray(g.searchtype,["int","integer","float",
"number","currency"])||"nn"===d||"nu"===d?b.field+" "+c+" "+f:b.field+" "+c+' "'+f+'"'};this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){a("th.ui-state-error",this).html("");a("tr.error",this).hide()};this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(e.filter)};this.toString=function(){function a(c){var d=
"(",e;if(void 0!==c.groups)for(e=0;e<c.groups.length;e++)1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && "),d+=a(c.groups[e]);if(void 0!==c.rules)for(e=0;e<c.rules.length;e++){1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && ");var f=c.rules[e];if(b.p.errorcheck){for(var g=void 0,h=void 0,g=0;g<b.p.columns.length;g++)if(b.p.columns[g].name===f.field){h=b.p.columns[g];break}h&&l(f.data,h)}d+=f.op+"(item."+f.field+",'"+f.data+"')"}d+=")";return"()"===d?"":d}var b=this;return a(this.p.filter)};this.reDraw();
if(this.p.showQuery)this.onchange();this.filter=!0}}})};a.extend(a.fn.jqFilter,{toSQLString:function(){var a="";this.each(function(){a=this.toUserFriendlyString()});return a},filterData:function(){var a;this.each(function(){a=this.p.filter});return a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"===typeof a&&(a=jQuery.jgrid.parse(a));this.each(function(){this.p.filter=
a;this.reDraw();this.onchange()})}})})(jQuery);
var xmlJsonClass={xml2json:function(a,b){9===a.nodeType&&(a=a.documentElement);var d=this.removeWhite(a),d=this.toObj(d),d=this.toJson(d,a.nodeName,"\t");return"{\n"+b+(b?d.replace(/\t/g,b):d.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var d=function(a,b,c){var e="",l,m;if(a instanceof Array)if(0===a.length)e+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(l=0,m=a.length;l<m;l+=1)var r=c+d(a[l],b,c+"\t")+"\n",e=e+r;else if("object"===typeof a){l=!1;e+=c+"<"+b;for(m in a)a.hasOwnProperty(m)&&
("@"===m.charAt(0)?e+=" "+m.substr(1)+'="'+a[m].toString()+'"':l=!0);e+=l?">":"/>";if(l){for(m in a)a.hasOwnProperty(m)&&("#text"===m?e+=a[m]:"#cdata"===m?e+="<![CDATA["+a[m]+"]]\x3e":"@"!==m.charAt(0)&&(e+=d(a[m],m,c+"\t")));e+=("\n"===e.charAt(e.length-1)?c:"")+"</"+b+">"}}else e="function"===typeof a?e+(c+"<"+b+"><![CDATA["+a+"]]\x3e</"+b+">"):'""'===a.toString()||0===a.toString().length?e+(c+"<"+b+">__EMPTY_STRING_</"+b+">"):e+(c+"<"+b+">"+a.toString()+"</"+b+">");return e},c="",e;for(e in a)a.hasOwnProperty(e)&&
(c+=d(a[e],e,""));return b?c.replace(/\t/g,b):c.replace(/\t|\n/g,"")},toObj:function(a){var b={},d=/function/i;if(1===a.nodeType){if(a.attributes.length){var c;for(c=0;c<a.attributes.length;c+=1)b["@"+a.attributes[c].nodeName]=(a.attributes[c].nodeValue||"").toString()}if(a.firstChild){var e=c=0,f=!1,g;for(g=a.firstChild;g;g=g.nextSibling)1===g.nodeType?f=!0:3===g.nodeType&&g.nodeValue.match(/[^ \f\n\r\t\v]/)?c+=1:4===g.nodeType&&(e+=1);if(f)if(2>c&&2>e)for(this.removeWhite(a),g=a.firstChild;g;g=
g.nextSibling)3===g.nodeType?b["#text"]=this.escape(g.nodeValue):4===g.nodeType?d.test(g.nodeValue)?b[g.nodeName]=[b[g.nodeName],g.nodeValue]:b["#cdata"]=this.escape(g.nodeValue):b[g.nodeName]?b[g.nodeName]instanceof Array?b[g.nodeName][b[g.nodeName].length]=this.toObj(g):b[g.nodeName]=[b[g.nodeName],this.toObj(g)]:b[g.nodeName]=this.toObj(g);else a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):b=this.escape(this.innerXml(a));else if(c)a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):
(b=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===b?b="[]":"__EMPTY_STRING_"===b&&(b=""));else if(e)if(1<e)b=this.escape(this.innerXml(a));else for(g=a.firstChild;g;g=g.nextSibling)if(d.test(a.firstChild.nodeValue)){b=a.firstChild.nodeValue;break}else b["#cdata"]=this.escape(g.nodeValue)}a.attributes.length||a.firstChild||(b=null)}else 9===a.nodeType?b=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return b},toJson:function(a,b,d,c){void 0===c&&(c=!0);var e=b?'"'+b+'"':
"",f="\t",g="\n";c||(g=f="");if("[]"===a)e+=b?":[]":"[]";else if(a instanceof Array){var k,h,l=[];h=0;for(k=a.length;h<k;h+=1)l[h]=this.toJson(a[h],"",d+f,c);e+=(b?":[":"[")+(1<l.length?g+d+f+l.join(","+g+d+f)+g+d:l.join(""))+"]"}else if(null===a)e+=(b&&":")+"null";else if("object"===typeof a){k=[];for(h in a)a.hasOwnProperty(h)&&(k[k.length]=this.toJson(a[h],h,d+f,c));e+=(b?":{":"{")+(1<k.length?g+d+f+k.join(","+g+d+f)+g+d:k.join(""))+"}"}else e="string"===typeof a?e+((b&&":")+'"'+a.replace(/\\/g,
"\\\\").replace(/\"/g,'\\"')+'"'):e+((b&&":")+'"'+a.toString()+'"');return e},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var d=function(a){var b="",f;if(1===a.nodeType){b+="<"+a.nodeName;for(f=0;f<a.attributes.length;f+=1)b+=" "+a.attributes[f].nodeName+'="'+(a.attributes[f].nodeValue||"").toString()+'"';if(a.firstChild){b+=">";for(f=a.firstChild;f;f=f.nextSibling)b+=d(f);b+="</"+a.nodeName+">"}else b+="/>"}else 3===a.nodeType?b+=a.nodeValue:4===a.nodeType&&(b+="<![CDATA["+
a.nodeValue+"]]\x3e");return b};for(a=a.firstChild;a;a=a.nextSibling)b+=d(a)}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var b;for(b=a.firstChild;b;)if(3===b.nodeType)if(b.nodeValue.match(/[^ \f\n\r\t\v]/))b=b.nextSibling;else{var d=b.nextSibling;a.removeChild(b);b=d}else 1===b.nodeType&&this.removeWhite(b),b=b.nextSibling;return a}};
$.fn.toggleClick=function(){var a=arguments,b=a.length;return this.each(function(d,c){var e=0;$(c).click(function(){return a[e++%b].apply(this,arguments)})})};
(function(a){a.jqschedule={calendarid:"#calendar",eventid:"#event",calendarurl:"",locales:{dateFormat:"dd/MM/yyyy",bSave:"Save",bAdd:"Add",bDelete:"Delete",bCancel:"Cancel",bChange:"Change",bClose:"Close",bSearch:"Find",editCaption:"Edit event",addCaption:"Add new event",userCaption:"Change Calendar",searchCaption:"Advanced search"},searchCols:[],searchOpers:[],gotoDayEventView:function(b,d){a("#b_search_cal").trigger("click");var c=a.fullCalendar.parseDate(parseInt(b,10));a(a.jqschedule.calendarid).fullCalendar("gotoDate",
c.getFullYear(),c.getMonth(),c.getDate());a(a.jqschedule.calendarid).fullCalendar("changeView","agendaDay")},eventEditDialog:function(b,d,c){var e=a(a.jqschedule.eventid);a("input,textarea,select",e).val("");b.allDay?a("#endtime, #starttime",e).hide():a("#endtime, #starttime",e).show();a("#all_day",e).attr("checked",b.allDay);a("#title",e).val(b.title);setTimeout(function(){a("#description",e).val(b.description)},100);a("#location",e).val(b.location);a("#className",e).val(b.className);a("#access",
e).val(b.access);a("#start",e).val(a.fullCalendar.formatDate(b.start,a.jqschedule.locales.dateFormat));a("#starttime",e).val(a.fullCalendar.formatDate(b.start,"HH:mm"));a("#end",e).val(a.fullCalendar.formatDate(b.end?b.end:b.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(b.end?b.end:b.start,"HH:mm"));a("#user_id",e).val(b.user_id);d={};var f=a("#start",e).datepicker("option","dateFormat"),g;d[a.jqschedule.locales.bSave]=function(){var c=a.datepicker.parseDate(f,
a("#start",e).val()),d=a("#starttime",e).val(),d=d?d.split(":"):["0","0"];c.setHours(parseInt(d[0],10),parseInt(d[1],10));(d=a.datepicker.parseDate(f,a("#end",e).val()))||(d=a.datepicker.parseDate(f,a("#start",e).val()));var l=a("#endtime",e).val(),l=l?l.split(":"):["0","0"];d.setHours(parseInt(l[0],10),parseInt(l[1],10));0>d.getTime()-c.getTime()?alert("End time is little than start time"):(b.start=c,b._start=c,b.end=d,b._end=d,a("#all_day",e).attr("checked")?b.allDay=!0:b.allDay=!1,b.title=a("#title",
e).val(),""==a.trim(b.title)?alert("Title is required"):(b.description=a("#description",e).val(),b.location=a("#location",e).val(),b.className=a("#className",e).val(),b.access=a("#access",e).val(),b.user_id=a("#user_id",e).val(),g={},g.event_id=b.id,g.start=b.start.getTime()/1E3,g.end=b.end.getTime()/1E3,g.title=b.title,g.description=b.description,g.location=b.location,g.className=b.className,g.access=b.access,g.user_id=b.user_id,g.all_day=b.allDay?1:0,g.oper="editEvent",a.ajax({url:a.jqschedule.calendarurl,
data:g,type:"post",success:function(c){a(a.jqschedule.calendarid).fullCalendar("updateEvent",b);e.dialog("close")}})))};d[a.jqschedule.locales.bDelete]=function(){g={};g.event_id=b.id;g.oper="removeEvent";a.ajax({url:a.jqschedule.calendarurl,data:g,type:"post"});a(a.jqschedule.calendarid).fullCalendar("removeEvents",b.id);e.dialog("close")};d[a.jqschedule.locales.bCancel]=function(){e.dialog("close")};e.dialog({modal:!0,width:490,closeOnEscape:!1,position:{at:"center bottom",of:a.jqschedule.calendarid},
title:a.jqschedule.locales.editCaption,close:function(){e.dialog("destroy");e.hide();e=null},buttons:d}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004});return!1},eventViewDialog:function(b,d,c){var e=a(a.jqschedule.eventid);a("input,textarea,select",e).val("");b.allDay?a("#endtime, #starttime",e).hide():a("#endtime, #starttime",e).show();a("#all_day",e).attr("checked",b.allDay);a("#title",e).val(b.title);setTimeout(function(){a("#description",e).val(b.description)},100);a("#location",
e).val(b.location);a("#className",e).val(b.className);a("#access",e).val(b.access);a("#start",e).val(a.fullCalendar.formatDate(b.start,a.jqschedule.locales.dateFormat));a("#starttime",e).val(a.fullCalendar.formatDate(b.start,"HH:mm"));a("#end",e).val(a.fullCalendar.formatDate(b.end?b.end:b.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(b.end?b.end:b.start,"HH:mm"));a("#user_id",e).val(b.user_id);d={};d[a.jqschedule.locales.bClose]=function(){e.dialog("close")};
e.dialog({modal:!0,width:490,closeOnEscape:!1,position:{at:"center bottom",of:a.jqschedule.calendarid},title:a.jqschedule.locales.editCaption,close:function(){e.dialog("destroy");e.hide();e=null},buttons:d}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004});return!1},eventAddDialog:function(b,d,c,e){var f=a(a.jqschedule.eventid);a("input,textarea,select",f).val("");d?a("#endtime, #starttime",f).hide():a("#endtime, #starttime",f).show();a("#all_day",f).attr("checked",d);setTimeout(function(){a("#description",
f).val("")},100);a("#start",f).val(a.fullCalendar.formatDate(b,a.jqschedule.locales.dateFormat));a("#starttime",f).val(a.fullCalendar.formatDate(b,"HH:mm"));a("#end",f).val(a.fullCalendar.formatDate(b,a.jqschedule.locales.dateFormat));a("#endtime",f).val(a.fullCalendar.formatDate(b,"HH:mm"));b=a("#switchuser").val();a.isArray(b)&&(b=b[0]);a("#user_id",f).val(b);b={};var g=a("#start",f).datepicker("option","dateFormat"),k,h;b[a.jqschedule.locales.bAdd]=function(){h={};var b=a.datepicker.parseDate(g,
a("#start",f).val()),c=a("#starttime",f).val(),c=c?c.split(":"):["0","0"];b.setHours(parseInt(c[0],10),parseInt(c[1],10));(c=a.datepicker.parseDate(g,a("#end",f).val()))||(c=a.datepicker.parseDate(g,a("#start",f).val()));var d=a("#endtime").val(),d=d?d.split(":"):["0","0"];c.setHours(parseInt(d[0],10),parseInt(d[1],10));0>c.getTime()-b.getTime()?alert("End time is little than start time"):(h.start=b,h._start=b,h.end=c,h._end=c,a("#all_day",f).attr("checked")?h.allDay=!0:h.allDay=!1,h.title=a("#title",
f).val(),""==a.trim(h.title)?alert("Title is required"):(h.description=a("#description",f).val(),h.location=a("#location",f).val(),h.className=a("#className",f).val(),h.access=a("#access",f).val(),""==a.trim(h.className)||""===a.trim(h.access)?alert("Category or Access are requiered!"):(h.user_id=a("#user_id",f).val(),k={},k.start=h.start.getTime()/1E3,k.end=h.end.getTime()/1E3,k.title=h.title,k.description=h.description,k.location=h.location,k.className=h.className,k.access=h.access,k.user_id=h.user_id,
k.all_day=h.allDay?1:0,k.oper="newEvent",a.ajax({url:a.jqschedule.calendarurl,data:k,dataType:"json",type:"POST",success:function(b,c){b.event_id&&(h.id=b.event_id,h._id=b.event_id,a(a.jqschedule.calendarid).fullCalendar("renderEvent",h,!1),f.dialog("close"))}}))))};b[a.jqschedule.locales.bCancel]=function(){f.dialog("close")};f.dialog({modal:!0,width:490,position:{at:"center bottom",of:a.jqschedule.calendarid},closeOnEscape:!1,title:a.jqschedule.locales.addCaption,close:function(){f.dialog("destroy");
f.hide();f=null},buttons:b}).show();a(".ui-dialog").css({"font-size":"12px","z-index":1000004})},eventLoading:function(b){if(b){b=a(".calwrapper").width();var d=a(".calwrapper").height()+10;a("body").append('<div class="ui-widget-overlay" style="width:'+b+"px;height:"+d+'px;z-index: 1001;"></div>');a("#progresspar").show()}else a(".ui-widget-overlay").remove(),a("#progresspar").hide()},eventDrop:function(b,d,c,e,f){null==b.end&&(b.end=b.start);a.ajax({url:a.jqschedule.calendarurl,data:{oper:"moveEvent",
event_id:b.id,start:b.start.getTime()/1E3,end:b.end.getTime()/1E3,all_day:e?1:0},type:"post"})},eventResize:function(b,d,c,e,f,g,k){null==b.end&&(b.end=b.start);a.ajax({url:a.jqschedule.calendarurl,data:{oper:"resizeEvent",event_id:b.id,start:b.start.getTime()/1E3,end:b.end.getTime()/1E3},type:"post"})},eventRender:function(a,d,c){try{a.description&&d.tooltip({position:{my:"left bottom",at:"center top",offset:"-30 -10",of:d},content:function(c){return a.description}})}catch(e){}},changeCalendarUser:function(){var b=
a("#caluser");b.dialog({modal:!0,width:400,title:a.jqschedule.locales.userCaption,close:function(){b.dialog("destroy");b.hide();b=null},buttons:[{text:a.jqschedule.locales.bChange,click:function(){var d=a("#switchuser",this).val();a.ajax({url:a.jqschedule.calendarurl,data:{_user_id:d,oper:"switchUser"},type:"post",success:function(b,d){a(a.jqschedule.calendarid).fullCalendar("refetchEvents");a("#common_search").val("");a(".fnd-results").html("");a("#search_table").empty();var f=a("#switchuser option:selected");
if(1>=f.length)a("#cal_user").html("<li>"+f.text()+"</li>");else{var g="";a.each(f,function(){g+="<li>"+a(this).text()+"</li>"});a("#cal_user").html(g)}}});b.dialog("close")}},{text:a.jqschedule.locales.bCancel,click:function(){b.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004});return!1},printEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var b=a("#common_search").val(),d="simple";if(""==b){var d="complex",c=a("#search_cal");
if(c){c=c.jqFilter("filterData");if(!c.rules.length)return!1;try{b=xmlJsonClass.toJson(c,"","",!1)}catch(e){try{b=JSON.stringify(c)}catch(f){}}}}window.location=a.jqschedule.calendarurl+"?oper=printEvents&stype="+d+"&search=true&svalue="+b}else d=jQuery(a.jqschedule.calendarid).fullCalendar("getView"),b=d.start.getTime()/1E3,d=d.end.getTime()/1E3,window.location=a.jqschedule.calendarurl+"?oper=printEvents&start="+b+"&end="+d;return!1},exportEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var b=
a("#common_search").val(),d="simple";if(""==b){var d="complex",c=a("#search_cal");if(c){c=c.jqFilter("filterData");if(!c.rules.length)return!1;try{b=xmlJsonClass.toJson(c,"","",!1)}catch(e){try{b=JSON.stringify(c)}catch(f){}}}}window.location=a.jqschedule.calendarurl+"?oper=exportEvents&stype="+d+"&search=true&svalue="+b}else d=jQuery(a.jqschedule.calendarid).fullCalendar("getView"),b=d.start.getTime()/1E3,d=d.end.getTime()/1E3,window.location=a.jqschedule.calendarurl+"?oper=exportEvents&start="+
b+"&end="+d;return!1},showSearch:function(){a("#common_search").val()&&(a("#common_search").val(""),a("#b_common_search").trigger("click"));a(this).addClass("ui-state-active");a(".fc-view-agendaWeek, .fc-view-agendaDay, .fc-view-basicDay, .fc-view-basickWeek, .fc-view-month, .fc-view-year").hide();a(".fc-view-search").show();a("#common_search").focus()},hideSearch:function(){a(this).removeClass("ui-state-active");var b=a(a.jqschedule.calendarid).fullCalendar("getView").name;a(".fc-view-search").hide();
a(".fc-view-"+b).show()},_filSearchTable:function(b,d){a(d).empty();if(b&&b.length){a(".fnd-results").html(b.length);var c="";a.each(b,function(){var b=a.fullCalendar.parseDate(this.start),d=a.fullCalendar.parseDate(this.end),g=a.fullCalendar.formatDate(b,"HH:mm"),k=a.fullCalendar.formatDate(d,"HH:mm"),g=this.allDay?"all day":g+" - "+k,b=a.fullCalendar.formatDate(b,"ddd  dd MMM yyyy"),d=a.fullCalendar.formatDate(d,"ddd  dd MMM yyyy");b!=d&&(g+=" "+d);c+="<tr id='"+this.id+"'><th class='ui-event-cell ui-widget-content'><a href=\"javascript:jQuery.jqschedule.gotoDayEventView('"+
this.start+"');\">"+b+"</a></th><td class='ui-event-time ui-widget-content'>"+g+"</td><td class='ui-event-title ui-widget-content'><a href=\"javascript:jQuery.jqschedule.editFromSearch('"+this.id+"');\" class='' style='border: 0px none;text-decoration:  underline;'>"+this.title+"</a></td>";c+="<td class='source' style='display:none;'>";c+=this.id+"~`"+this.title+"~`"+this.start+"~`"+this.end+"~`"+this.description+"~`"+this.location+"~`"+this.className+"~`"+this.access+"~`"+this.allDay+"~`"+this.user_id;
c+="</td>";c+="</tr>"});a(d).append(c)}},doSimpleSearch:function(){var b=a("#common_search").val();b?a.ajax({url:a.jqschedule.calendarurl,data:{search:!0,stype:"simple",svalue:b,oper:"getEvent"},dataType:"json",type:"POST",success:function(b,c){a.jqschedule._filSearchTable(b,"#search_table")}}):(a(".fnd-results").html(""),a("#search_table").empty())},buildLocalSearch:function(){var b,d;a("label",a.jqschedule.eventid).each(function(c){b={};b.name=a(this).attr("for");b.label=a(this).html();"className"==
b.name||"access"==b.name?(b.inputtype="select",d={},a("#"+b.name+" option",a.jqschedule.eventid).each(function(){d[a(this).val()]=a(this).text()}),b.searchoptions={value:d}):"all_day"==b.name?(b.inputtype="select",d={1:"Yes",0:"No"},b.searchoptions={value:d}):"start"==b.name||"end"==b.name?(b.searchtype="date",b.searchoptions={size:20,sopt:["eq","gt","ge","lt","le"],dataInit:function(b){a(b).datetimepicker()}}):b.searchoptions={size:20};a.jqschedule.searchCols[c]=b})},advancedSearchDlg:function(){a("#search_cal").jqFilter({columns:a.jqschedule.searchCols,
filter:{groupOp:"AND",rules:[{field:a.jqschedule.searchCols[0].name,op:"eq",data:""}]},_gridsopt:a.jqschedule.searchOpers});a("#search_cal").dialog({modal:!0,width:"auto",autoOpen:!1,title:a.jqschedule.locales.searchCaption,close:function(){},buttons:[{text:a.jqschedule.locales.bSearch,click:function(){var b=a("#search_cal"),d,c=b.jqFilter("filterData");if(c.rules.length){try{d=xmlJsonClass.toJson(c,"","",!1)}catch(e){try{d=JSON.stringify(c)}catch(f){}}d&&a.ajax({url:a.jqschedule.calendarurl,data:{search:!0,
stype:"complex",svalue:d,oper:"getEvent"},dataType:"json",type:"POST",success:function(b,c){a.jqschedule._filSearchTable(b,"#search_table")}});b.dialog("close")}}},{text:a.jqschedule.locales.bClose,click:function(){a("#search_cal").dialog("close")}}]});a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004})},editFromSearch:function(b){var d=a("tr#"+b+" td.source").html().split("~`"),c={};a.each("id title start end description location className access allDay user_id".split(" "),
function(a){if("start"==this||"end"==this)d[a]=new Date(1E3*parseFloat(d[a]));"allDay"==this&&(d[a]="1"==d[a]?!0:!1);c[this]=d[a]});a.jqschedule.eventViewDialog(c)},openDaySearchDlg:function(b,d,c){var e=b.getTime()/1E3;b.setHours(23);b.setMinutes(23);var f=b.getTime()/1E3,g=a("#day_dialog");g.dialog({modal:!0,width:450,close:function(){g.dialog("destroy");g.hide();g=null},open:function(b,c){a("#day_table").empty();a.ajax({url:a.jqschedule.calendarurl,data:{oper:"getEvent",start:e,end:f},dataType:"json",
type:"POST",success:function(b,c){a.jqschedule._filSearchTable(b,"#day_table")}})},buttons:[{text:a.jqschedule.locales.bClose,click:function(){g.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css({"font-size":"12px","z-index":1000004})},eventsFunc:function(b,d,c){a.ajax({url:a.jqschedule.calendarurl,dataType:"json",type:"POST",data:{oper:"getEvent",start:b.getTime()/1E3,end:d.getTime()/1E3},success:function(a,b){c(a)}})},processScript:function(){a("#datepicker").datepicker({dateFormat:"yy-mm-dd",
onSelect:function(b,d){var c=b.split("-");a(a.jqschedule.calendarid).fullCalendar("gotoDate",parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))}});a("#start, #end",a.jqschedule.eventid).datepicker();a("#all_day",a.jqschedule.eventid).click(function(){this.checked?a("#endtime, #starttime",a.jqschedule.eventid).val("00:00").hide():a("#endtime, #starttime",a.jqschedule.eventid).show()});a(".custbutton").height(a("table.fc-header").height());a("#b_user_change").click(jQuery.jqschedule.changeCalendarUser);
a("#b_export_ical").click(jQuery.jqschedule.exportEvents);a("#b_print_cal").click(jQuery.jqschedule.printEvents);a(".fc-content",a.jqschedule.calendarid).append(a(".fc-view-search"));a("#b_search_cal").toggleClick(jQuery.jqschedule.showSearch,jQuery.jqschedule.hideSearch);a("#b_common_search").click(jQuery.jqschedule.doSimpleSearch);a("#b_adv_search").click(function(){a("#search_cal").dialog("open");return!1});a(".jq-button").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});
a.jqschedule.buildLocalSearch();a.jqschedule.advancedSearchDlg()}}})(jQuery);
